

###

# WebSocketå’Œhttpçº§è”ä»£ç†æµ‹è¯•è®°å½•

## æµ‹è¯•æ—¶é—´
2025-09-14 11:26:28

## 1. ç¼–è¯‘ä»£ç†æœåŠ¡å™¨

æ‰§è¡Œå‘½ä»¤: `go build -o socks5-websocket-proxy-golang.exe github.com/masx200/socks5-websocket-proxy-golang/cmd`

âœ… ä»£ç†æœåŠ¡å™¨ç¼–è¯‘æˆåŠŸ

## 2. å¯åŠ¨WebSocketæœåŠ¡å™¨ï¼ˆä¸Šæ¸¸ï¼‰

æ‰§è¡Œå‘½ä»¤: `./socks5-websocket-proxy-golang.exe -mode server -protocol websocket -addr :28081`

ðŸ“‹ WebSocketæœåŠ¡å™¨è¿›ç¨‹PID: 27729

ç­‰å¾…WebSocketæœåŠ¡å™¨å¯åŠ¨...
âœ… WebSocketæœåŠ¡å™¨å¯åŠ¨æˆåŠŸ

## 3. å¯åŠ¨httpæœåŠ¡å™¨ï¼ˆä¸‹æ¸¸ï¼‰

æ‰§è¡Œå‘½ä»¤: `./main.exe  -port 18080 -upstream-type websocket -upstream-address ws://localhost:28081`

ðŸ“‹ httpæœåŠ¡å™¨è¿›ç¨‹PID: 27736

ç­‰å¾…httpæœåŠ¡å™¨å¯åŠ¨...
âœ… httpæœåŠ¡å™¨å¯åŠ¨æˆåŠŸ

## 4. æµ‹è¯•çº§è”ä»£ç†åŠŸèƒ½

### æµ‹è¯•1: HTTPä»£ç†é€šè¿‡çº§è”

æ‰§è¡Œå‘½ä»¤: `curl -v -I http://www.baidu.com -x http://localhost:18080`

ðŸ“‹ Curlæµ‹è¯•1è¿›ç¨‹PID: 27765, é€€å‡ºçŠ¶æ€ç : 0

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
* Host localhost:18080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:18080...
* Connected to localhost (::1) port 18080
* using HTTP/1.x
> HEAD http://www.baidu.com/ HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.15.0
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Bdpagetype: 1
< Bdqid: 0x9bef13700082916b
< Connection: keep-alive
< Content-Length: 654706
< Content-Type: text/html; charset=utf-8
< Date: Sun, 14 Sep 2025 11:26:37 GMT
< Server: BWS/1.1
< Set-Cookie: BIDUPSID=3FA3018BD9FE91D6694727A9D7A5CBC0; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
< Set-Cookie: PSTM=1757849197; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
< Set-Cookie: BDSVRTM=1; path=/
< Set-Cookie: BD_HOME=1; path=/
< Set-Cookie: BAIDUID=3FA3018BD9FE91D6694727A9D7A5CBC0:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000
< Set-Cookie: BAIDUID_BFESS=3FA3018BD9FE91D6694727A9D7A5CBC0:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000; Secure; SameSite=None
< Tr_id: super_0x9bef13700082916b
< Traceid: 1757849197051591322611236220967078498667
< Vary: Accept-Encoding
< X-Ua-Compatible: IE=Edge,chrome=1
< X-Xss-Protection: 1;mode=block
< 
  0  639k    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 OK
Bdpagetype: 1
Bdqid: 0x9bef13700082916b
Connection: keep-alive
Content-Length: 654706
Content-Type: text/html; charset=utf-8
Date: Sun, 14 Sep 2025 11:26:37 GMT
Server: BWS/1.1
Set-Cookie: BIDUPSID=3FA3018BD9FE91D6694727A9D7A5CBC0; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
Set-Cookie: PSTM=1757849197; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
Set-Cookie: BDSVRTM=1; path=/
Set-Cookie: BD_HOME=1; path=/
Set-Cookie: BAIDUID=3FA3018BD9FE91D6694727A9D7A5CBC0:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000
Set-Cookie: BAIDUID_BFESS=3FA3018BD9FE91D6694727A9D7A5CBC0:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000; Secure; SameSite=None
Tr_id: super_0x9bef13700082916b
Traceid: 1757849197051591322611236220967078498667
Vary: Accept-Encoding
X-Ua-Compatible: IE=Edge,chrome=1
X-Xss-Protection: 1;mode=block


```

### æµ‹è¯•2: HTTPSä»£ç†é€šè¿‡çº§è”

æ‰§è¡Œå‘½ä»¤: `curl -v -I https://www.baidu.com -x http://localhost:18080`

ðŸ“‹ Curlæµ‹è¯•2è¿›ç¨‹PID: 27769, é€€å‡ºçŠ¶æ€ç : 0

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
* Host localhost:18080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:18080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.baidu.com:443
> CONNECT www.baidu.com:443 HTTP/1.1
> Host: www.baidu.com:443
> User-Agent: curl/8.15.0
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
} [5 bytes data]
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [1566 bytes data]
*  CAfile: /data/data/com.termux/files/usr/etc/tls/cert.pem
*  CApath: /data/data/com.termux/files/usr/etc/tls/certs
{ [5 bytes data]
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [102 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [4771 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / secp256r1 / RSASSA-PSS
* ALPN: server accepted http/1.1
* Server certificate:
*  subject: C=CN; ST=beijing; L=beijing; O=Beijing Baidu Netcom Science Technology Co., Ltd; CN=baidu.com
*  start date: Jul  9 07:01:02 2025 GMT
*  expire date: Aug 10 07:01:01 2026 GMT
*  subjectAltName: host "www.baidu.com" matched cert's "*.baidu.com"
*  issuer: C=BE; O=GlobalSign nv-sa; CN=GlobalSign RSA OV SSL CA 2018
*  SSL certificate verify ok.
*   Certificate level 0: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 2: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
* Connected to localhost (::1) port 18080
* using HTTP/1.x
} [5 bytes data]
> HEAD / HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.15.0
> Accept: */*
> 
* Request completely sent off
{ [5 bytes data]
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: no-cache
< Connection: keep-alive
< Content-Length: 227
< Content-Security-Policy: frame-ancestors 'self' https://chat.baidu.com http://mirror-chat.baidu.com https://fj-chat.baidu.com https://hba-chat.baidu.com https://hbe-chat.baidu.com https://njjs-chat.baidu.com https://nj-chat.baidu.com https://hna-chat.baidu.com https://hnb-chat.baidu.com http://debug.baidu-int.com https://sai.baidu.com https://mcpstore.baidu.com https://mcpserver.baidu.com https://www.mcpworld.com https://platform-openai.now.baidu.com;
< Content-Type: text/html
< Date: Sun, 14 Sep 2025 11:26:37 GMT
< Pragma: no-cache
< Server: BWS/1.1
< Set-Cookie: BD_NOT_HTTPS=1; path=/; Max-Age=300
< Set-Cookie: PSTM=1757849197; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
< Set-Cookie: BAIDUID=F96B9EE23EF5A1DDE067E899C1D00EF9:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000
< Set-Cookie: BAIDUID_BFESS=F96B9EE23EF5A1DDE067E899C1D00EF9:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000; Secure; SameSite=None
< Traceid: 1757849197268017409010758324096401721953
< X-Ua-Compatible: IE=Edge,chrome=1
< X-Xss-Protection: 1;mode=block
{ [5 bytes data]
< 
  0   227    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0   227    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 Connection established

HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: no-cache
Connection: keep-alive
Content-Length: 227
Content-Security-Policy: frame-ancestors 'self' https://chat.baidu.com http://mirror-chat.baidu.com https://fj-chat.baidu.com https://hba-chat.baidu.com https://hbe-chat.baidu.com https://njjs-chat.baidu.com https://nj-chat.baidu.com https://hna-chat.baidu.com https://hnb-chat.baidu.com http://debug.baidu-int.com https://sai.baidu.com https://mcpstore.baidu.com https://mcpserver.baidu.com https://www.mcpworld.com https://platform-openai.now.baidu.com;
Content-Type: text/html
Date: Sun, 14 Sep 2025 11:26:37 GMT
Pragma: no-cache
Server: BWS/1.1
Set-Cookie: BD_NOT_HTTPS=1; path=/; Max-Age=300
Set-Cookie: PSTM=1757849197; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
Set-Cookie: BAIDUID=F96B9EE23EF5A1DDE067E899C1D00EF9:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000
Set-Cookie: BAIDUID_BFESS=F96B9EE23EF5A1DDE067E899C1D00EF9:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000; Secure; SameSite=None
Traceid: 1757849197268017409010758324096401721953
X-Ua-Compatible: IE=Edge,chrome=1
X-Xss-Protection: 1;mode=block


```

### ðŸ“‹ æ‰€æœ‰è¿›ç¨‹PIDè®°å½•

æ‰€æœ‰è¿›ç¨‹PID: 27478, 27617, 27729, 27729, 27736, 27736, 27765, 27765, 27769, 27769



###

# WebSocketå’Œhttpçº§è”ä»£ç†æµ‹è¯•è®°å½•

## æµ‹è¯•æ—¶é—´
2025-09-14 11:26:28

## 1. ç¼–è¯‘ä»£ç†æœåŠ¡å™¨

æ‰§è¡Œå‘½ä»¤: `go build -o socks5-websocket-proxy-golang.exe github.com/masx200/socks5-websocket-proxy-golang/cmd`

âœ… ä»£ç†æœåŠ¡å™¨ç¼–è¯‘æˆåŠŸ

## 2. å¯åŠ¨WebSocketæœåŠ¡å™¨ï¼ˆä¸Šæ¸¸ï¼‰

æ‰§è¡Œå‘½ä»¤: `./socks5-websocket-proxy-golang.exe -mode server -protocol websocket -addr :28081`

ðŸ“‹ WebSocketæœåŠ¡å™¨è¿›ç¨‹PID: 27729

ç­‰å¾…WebSocketæœåŠ¡å™¨å¯åŠ¨...
âœ… WebSocketæœåŠ¡å™¨å¯åŠ¨æˆåŠŸ

## 3. å¯åŠ¨httpæœåŠ¡å™¨ï¼ˆä¸‹æ¸¸ï¼‰

æ‰§è¡Œå‘½ä»¤: `./main.exe  -port 18080 -upstream-type websocket -upstream-address ws://localhost:28081`

ðŸ“‹ httpæœåŠ¡å™¨è¿›ç¨‹PID: 27736

ç­‰å¾…httpæœåŠ¡å™¨å¯åŠ¨...
âœ… httpæœåŠ¡å™¨å¯åŠ¨æˆåŠŸ

## 4. æµ‹è¯•çº§è”ä»£ç†åŠŸèƒ½

### æµ‹è¯•1: HTTPä»£ç†é€šè¿‡çº§è”

æ‰§è¡Œå‘½ä»¤: `curl -v -I http://www.baidu.com -x http://localhost:18080`

ðŸ“‹ Curlæµ‹è¯•1è¿›ç¨‹PID: 27765, é€€å‡ºçŠ¶æ€ç : 0

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
* Host localhost:18080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:18080...
* Connected to localhost (::1) port 18080
* using HTTP/1.x
> HEAD http://www.baidu.com/ HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.15.0
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Bdpagetype: 1
< Bdqid: 0x9bef13700082916b
< Connection: keep-alive
< Content-Length: 654706
< Content-Type: text/html; charset=utf-8
< Date: Sun, 14 Sep 2025 11:26:37 GMT
< Server: BWS/1.1
< Set-Cookie: BIDUPSID=3FA3018BD9FE91D6694727A9D7A5CBC0; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
< Set-Cookie: PSTM=1757849197; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
< Set-Cookie: BDSVRTM=1; path=/
< Set-Cookie: BD_HOME=1; path=/
< Set-Cookie: BAIDUID=3FA3018BD9FE91D6694727A9D7A5CBC0:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000
< Set-Cookie: BAIDUID_BFESS=3FA3018BD9FE91D6694727A9D7A5CBC0:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000; Secure; SameSite=None
< Tr_id: super_0x9bef13700082916b
< Traceid: 1757849197051591322611236220967078498667
< Vary: Accept-Encoding
< X-Ua-Compatible: IE=Edge,chrome=1
< X-Xss-Protection: 1;mode=block
< 
  0  639k    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 OK
Bdpagetype: 1
Bdqid: 0x9bef13700082916b
Connection: keep-alive
Content-Length: 654706
Content-Type: text/html; charset=utf-8
Date: Sun, 14 Sep 2025 11:26:37 GMT
Server: BWS/1.1
Set-Cookie: BIDUPSID=3FA3018BD9FE91D6694727A9D7A5CBC0; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
Set-Cookie: PSTM=1757849197; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
Set-Cookie: BDSVRTM=1; path=/
Set-Cookie: BD_HOME=1; path=/
Set-Cookie: BAIDUID=3FA3018BD9FE91D6694727A9D7A5CBC0:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000
Set-Cookie: BAIDUID_BFESS=3FA3018BD9FE91D6694727A9D7A5CBC0:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000; Secure; SameSite=None
Tr_id: super_0x9bef13700082916b
Traceid: 1757849197051591322611236220967078498667
Vary: Accept-Encoding
X-Ua-Compatible: IE=Edge,chrome=1
X-Xss-Protection: 1;mode=block


```

### æµ‹è¯•2: HTTPSä»£ç†é€šè¿‡çº§è”

æ‰§è¡Œå‘½ä»¤: `curl -v -I https://www.baidu.com -x http://localhost:18080`

ðŸ“‹ Curlæµ‹è¯•2è¿›ç¨‹PID: 27769, é€€å‡ºçŠ¶æ€ç : 0

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
* Host localhost:18080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:18080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.baidu.com:443
> CONNECT www.baidu.com:443 HTTP/1.1
> Host: www.baidu.com:443
> User-Agent: curl/8.15.0
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
} [5 bytes data]
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [1566 bytes data]
*  CAfile: /data/data/com.termux/files/usr/etc/tls/cert.pem
*  CApath: /data/data/com.termux/files/usr/etc/tls/certs
{ [5 bytes data]
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [102 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [4771 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / secp256r1 / RSASSA-PSS
* ALPN: server accepted http/1.1
* Server certificate:
*  subject: C=CN; ST=beijing; L=beijing; O=Beijing Baidu Netcom Science Technology Co., Ltd; CN=baidu.com
*  start date: Jul  9 07:01:02 2025 GMT
*  expire date: Aug 10 07:01:01 2026 GMT
*  subjectAltName: host "www.baidu.com" matched cert's "*.baidu.com"
*  issuer: C=BE; O=GlobalSign nv-sa; CN=GlobalSign RSA OV SSL CA 2018
*  SSL certificate verify ok.
*   Certificate level 0: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 2: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
* Connected to localhost (::1) port 18080
* using HTTP/1.x
} [5 bytes data]
> HEAD / HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.15.0
> Accept: */*
> 
* Request completely sent off
{ [5 bytes data]
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: no-cache
< Connection: keep-alive
< Content-Length: 227
< Content-Security-Policy: frame-ancestors 'self' https://chat.baidu.com http://mirror-chat.baidu.com https://fj-chat.baidu.com https://hba-chat.baidu.com https://hbe-chat.baidu.com https://njjs-chat.baidu.com https://nj-chat.baidu.com https://hna-chat.baidu.com https://hnb-chat.baidu.com http://debug.baidu-int.com https://sai.baidu.com https://mcpstore.baidu.com https://mcpserver.baidu.com https://www.mcpworld.com https://platform-openai.now.baidu.com;
< Content-Type: text/html
< Date: Sun, 14 Sep 2025 11:26:37 GMT
< Pragma: no-cache
< Server: BWS/1.1
< Set-Cookie: BD_NOT_HTTPS=1; path=/; Max-Age=300
< Set-Cookie: PSTM=1757849197; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
< Set-Cookie: BAIDUID=F96B9EE23EF5A1DDE067E899C1D00EF9:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000
< Set-Cookie: BAIDUID_BFESS=F96B9EE23EF5A1DDE067E899C1D00EF9:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000; Secure; SameSite=None
< Traceid: 1757849197268017409010758324096401721953
< X-Ua-Compatible: IE=Edge,chrome=1
< X-Xss-Protection: 1;mode=block
{ [5 bytes data]
< 
  0   227    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0   227    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 Connection established

HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: no-cache
Connection: keep-alive
Content-Length: 227
Content-Security-Policy: frame-ancestors 'self' https://chat.baidu.com http://mirror-chat.baidu.com https://fj-chat.baidu.com https://hba-chat.baidu.com https://hbe-chat.baidu.com https://njjs-chat.baidu.com https://nj-chat.baidu.com https://hna-chat.baidu.com https://hnb-chat.baidu.com http://debug.baidu-int.com https://sai.baidu.com https://mcpstore.baidu.com https://mcpserver.baidu.com https://www.mcpworld.com https://platform-openai.now.baidu.com;
Content-Type: text/html
Date: Sun, 14 Sep 2025 11:26:37 GMT
Pragma: no-cache
Server: BWS/1.1
Set-Cookie: BD_NOT_HTTPS=1; path=/; Max-Age=300
Set-Cookie: PSTM=1757849197; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
Set-Cookie: BAIDUID=F96B9EE23EF5A1DDE067E899C1D00EF9:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000
Set-Cookie: BAIDUID_BFESS=F96B9EE23EF5A1DDE067E899C1D00EF9:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000; Secure; SameSite=None
Traceid: 1757849197268017409010758324096401721953
X-Ua-Compatible: IE=Edge,chrome=1
X-Xss-Protection: 1;mode=block


```

### ðŸ“‹ æ‰€æœ‰è¿›ç¨‹PIDè®°å½•

æ‰€æœ‰è¿›ç¨‹PID: 27478, 27617, 27729, 27729, 27736, 27736, 27765, 27765, 27769, 27769

## 5. å…³é—­æœåŠ¡å™¨

âœ… æ‰€æœ‰æµ‹è¯•æˆåŠŸï¼Œæ­£åœ¨å…³é—­æœåŠ¡å™¨è¿›ç¨‹...

ðŸ›‘ æ­£åœ¨ç»ˆæ­¢WebSocketæœåŠ¡å™¨è¿›ç¨‹...
âœ… WebSocketæœåŠ¡å™¨è¿›ç¨‹å·²ç»ˆæ­¢

ðŸ›‘ æ­£åœ¨ç»ˆæ­¢httpæœåŠ¡å™¨è¿›ç¨‹...
âœ… httpæœåŠ¡å™¨è¿›ç¨‹å·²ç»ˆæ­¢

ðŸ§¹ æ­£åœ¨æ¸…ç†æ‰€æœ‰å­è¿›ç¨‹...
âœ… æ‰€æœ‰å­è¿›ç¨‹å·²æ¸…ç†å®Œæˆ

ðŸ§¹ å·²æ¸…ç†ç¼–è¯‘çš„å¯æ‰§è¡Œæ–‡ä»¶
### WebSocketæœåŠ¡å™¨æ—¥å¿—è¾“å‡º

```
2025/09/14 11:26:32 main.go:147: å¯åŠ¨websocketæœåŠ¡ç«¯ï¼Œç›‘å¬åœ°å€: :28081
2025/09/14 11:26:32 server.go:83: [WEBSOCKET-SERVER] Server started successfully, listening on :28081
2025/09/14 11:26:32 server.go:84: [WEBSOCKET-SERVER] Authentication enabled: false (0 users configured)
2025/09/14 11:26:32 server.go:86: [WEBSOCKET-SERVER] Upstream selector enabled: false
2025/09/14 11:26:32 server.go:87: [WEBSOCKET-SERVER] Read timeout: 30s, Write timeout: 30s
2025/09/14 11:26:32 main.go:221: websocketæœåŠ¡ç«¯å·²å¯åŠ¨ï¼ŒæŒ‰Ctrl+Cåœæ­¢
2025/09/14 11:26:34 server.go:102: url /
2025/09/14 11:26:34 server.go:104: headers map[Connection:[Upgrade] Sec-Websocket-Extensions:[permessage-deflate; server_no_context_takeover; client_no_context_takeover] Sec-Websocket-Key:[KGfvtNABfKuaHF5kFmRFUA==] Sec-Websocket-Version:[13] Upgrade:[websocket] User-Agent:[Go-http-client/1.1] X-Proxy-Target-Host:[127.82.255.183] X-Proxy-Target-Port:[20013]]
2025/09/14 11:26:34 server.go:107: [WEBSOCKET-CONN] New connection attempt from 127.0.0.1:59968 at 2025-09-14 11:26:34
2025/09/14 11:26:34 server.go:113: [WEBSOCKET-CONN] No authentication required for client 127.0.0.1:59968
2025/09/14 11:26:34 server.go:323: [WEBSOCKET-AUTH] Parsed auth info - username: '', password: '', targetHost: '127.82.255.183', targetPort: 20013
2025/09/14 11:26:34 server.go:185: [WEBSOCKET-AUTH] No authentication configured, allowing access for user ''
2025/09/14 11:26:34 server.go:131: [WEBSOCKET-AUTH] Authentication successful for user '' from 127.0.0.1:59968
2025/09/14 11:26:34 server.go:141: [WEBSOCKET-CONN] WebSocket connection established successfully for target 127.82.255.183:20013 from 127.0.0.1:59968
2025/09/14 11:26:34 server.go:239: [WEBSOCKET-UPSTREAM] Using direct connection for target 127.82.255.183:20013 (timeout: 30s)
2025/09/14 11:26:34 server.go:244: [WEBSOCKET-UPSTREAM] Direct connection established for target 127.82.255.183:20013
2025/09/14 11:26:34 server.go:333: [WEBSOCKET-FORWARD] Starting data forwarding between connections
2025/09/14 11:26:34 server.go:102: url /
2025/09/14 11:26:34 server.go:104: headers map[Connection:[Upgrade] Sec-Websocket-Extensions:[permessage-deflate; server_no_context_takeover; client_no_context_takeover] Sec-Websocket-Key:[AKG6KGKdUufu44Tc7tAB/g==] Sec-Websocket-Version:[13] Upgrade:[websocket] User-Agent:[Go-http-client/1.1] X-Proxy-Target-Host:[www.baidu.com] X-Proxy-Target-Port:[80]]
2025/09/14 11:26:34 server.go:107: [WEBSOCKET-CONN] New connection attempt from 127.0.0.1:59974 at 2025-09-14 11:26:34
2025/09/14 11:26:34 server.go:113: [WEBSOCKET-CONN] No authentication required for client 127.0.0.1:59974
2025/09/14 11:26:34 server.go:323: [WEBSOCKET-AUTH] Parsed auth info - username: '', password: '', targetHost: 'www.baidu.com', targetPort: 80
2025/09/14 11:26:34 server.go:185: [WEBSOCKET-AUTH] No authentication configured, allowing access for user ''
2025/09/14 11:26:34 server.go:131: [WEBSOCKET-AUTH] Authentication successful for user '' from 127.0.0.1:59974
2025/09/14 11:26:34 server.go:141: [WEBSOCKET-CONN] WebSocket connection established successfully for target www.baidu.com:80 from 127.0.0.1:59974
2025/09/14 11:26:34 server.go:239: [WEBSOCKET-UPSTREAM] Using direct connection for target www.baidu.com:80 (timeout: 30s)
2025/09/14 11:26:35 server.go:244: [WEBSOCKET-UPSTREAM] Direct connection established for target www.baidu.com:80
2025/09/14 11:26:35 server.go:333: [WEBSOCKET-FORWARD] Starting data forwarding between connections
2025/09/14 11:26:37 server.go:102: url /
2025/09/14 11:26:37 server.go:104: headers map[Connection:[Upgrade] Sec-Websocket-Extensions:[permessage-deflate; server_no_context_takeover; client_no_context_takeover] Sec-Websocket-Key:[JvPbM3mZIN8wSGhf9C1PQg==] Sec-Websocket-Version:[13] Upgrade:[websocket] User-Agent:[Go-http-client/1.1] X-Proxy-Target-Host:[127.82.255.183] X-Proxy-Target-Port:[20013]]
2025/09/14 11:26:37 server.go:107: [WEBSOCKET-CONN] New connection attempt from 127.0.0.1:59988 at 2025-09-14 11:26:37
2025/09/14 11:26:37 server.go:113: [WEBSOCKET-CONN] No authentication required for client 127.0.0.1:59988
2025/09/14 11:26:37 server.go:323: [WEBSOCKET-AUTH] Parsed auth info - username: '', password: '', targetHost: '127.82.255.183', targetPort: 20013
2025/09/14 11:26:37 server.go:185: [WEBSOCKET-AUTH] No authentication configured, allowing access for user ''
2025/09/14 11:26:37 server.go:131: [WEBSOCKET-AUTH] Authentication successful for user '' from 127.0.0.1:59988
2025/09/14 11:26:37 server.go:141: [WEBSOCKET-CONN] WebSocket connection established successfully for target 127.82.255.183:20013 from 127.0.0.1:59988
2025/09/14 11:26:37 server.go:239: [WEBSOCKET-UPSTREAM] Using direct connection for target 127.82.255.183:20013 (timeout: 30s)
2025/09/14 11:26:37 server.go:244: [WEBSOCKET-UPSTREAM] Direct connection established for target 127.82.255.183:20013
2025/09/14 11:26:37 server.go:333: [WEBSOCKET-FORWARD] Starting data forwarding between connections
2025/09/14 11:26:37 server.go:102: url /
2025/09/14 11:26:37 server.go:104: headers map[Connection:[Upgrade] Sec-Websocket-Extensions:[permessage-deflate; server_no_context_takeover; client_no_context_takeover] Sec-Websocket-Key:[UTqytMqluisFPfjl7ywC0g==] Sec-Websocket-Version:[13] Upgrade:[websocket] User-Agent:[Go-http-client/1.1] X-Proxy-Target-Host:[www.baidu.com] X-Proxy-Target-Port:[443]]
2025/09/14 11:26:37 server.go:107: [WEBSOCKET-CONN] New connection attempt from 127.0.0.1:59994 at 2025-09-14 11:26:37
2025/09/14 11:26:37 server.go:113: [WEBSOCKET-CONN] No authentication required for client 127.0.0.1:59994
2025/09/14 11:26:37 server.go:323: [WEBSOCKET-AUTH] Parsed auth info - username: '', password: '', targetHost: 'www.baidu.com', targetPort: 443
2025/09/14 11:26:37 server.go:185: [WEBSOCKET-AUTH] No authentication configured, allowing access for user ''
2025/09/14 11:26:37 server.go:131: [WEBSOCKET-AUTH] Authentication successful for user '' from 127.0.0.1:59994
2025/09/14 11:26:37 server.go:141: [WEBSOCKET-CONN] WebSocket connection established successfully for target www.baidu.com:443 from 127.0.0.1:59994
2025/09/14 11:26:37 server.go:239: [WEBSOCKET-UPSTREAM] Using direct connection for target www.baidu.com:443 (timeout: 30s)
2025/09/14 11:26:37 server.go:244: [WEBSOCKET-UPSTREAM] Direct connection established for target www.baidu.com:443
2025/09/14 11:26:37 server.go:333: [WEBSOCKET-FORWARD] Starting data forwarding between connections
```

### httpæœåŠ¡å™¨æ—¥å¿—è¾“å‡º

```
2025/09/14 11:26:33 main.go:519: ä»£ç†æœåŠ¡å™¨å¯åŠ¨ä¸­...
2025/09/14 11:26:33 main.go:563: dohalpn: []
2025/09/14 11:26:33 main.go:565: hostname: 0.0.0.0
2025/09/14 11:26:33 main.go:567: port: 18080
2025/09/14 11:26:33 main.go:569: server_cert: 
2025/09/14 11:26:33 main.go:571: server_key: 
2025/09/14 11:26:33 main.go:573: username: 
2025/09/14 11:26:33 main.go:575: password: 
2025/09/14 11:26:33 main.go:577: dohurl: []
2025/09/14 11:26:33 main.go:579: dohip: []
2025/09/14 11:26:33 main.go:580: upstream-type: websocket
2025/09/14 11:26:33 main.go:581: upstream-address: ws://localhost:28081
2025/09/14 11:26:33 main.go:582: upstream-username: 
2025/09/14 11:26:33 main.go:583: upstream-password: 
2025/09/14 11:26:33 main.go:640: WebSocketä»£ç†é…ç½®å·²æ·»åŠ 
2025/09/14 11:26:33 main.go:898: {
  "hostname": "",
  "port": 0,
  "server_cert": "",
  "server_key": "",
  "username": "",
  "password": "",
  "doh": null,
  "upstreams": {
    "websocket_upstream": {
      "type": "websocket",
      "http_proxy": "ws://localhost:28081",
      "https_proxy": "ws://localhost:28081",
      "bypass_list": null,
      "ws_proxy": "ws://localhost:28081",
      "ws_username": "",
      "ws_password": "",
      "http_username": "",
      "http_password": "",
      "socks5_proxy": "ws://localhost:28081",
      "socks5_username": "",
      "socks5_password": ""
    }
  },
  "rules": [
    {
      "filter": "websocket_filter",
      "upstream": "websocket_upstream"
    }
  ],
  "filters": {
    "websocket_filter": {
      "patterns": [
        "*"
      ]
    }
  }
}
2025/09/14 11:26:33 simple.go:31: Proxy server started on port [::]:18080
2025/09/14 11:26:33 http.go:388: Random IP: 127.82.255.183
2025/09/14 11:26:33 http.go:406: Random integer: 20013
2025/09/14 11:26:33 http.go:358: Proxy server started on port 127.82.255.183:20013
2025/09/14 11:26:34 simple.go:57: remote addr: 127.0.0.1:60210
2025/09/14 11:26:34 simple.go:79: GET http://www.baidu.com/ HTTP/1.1
2025/09/14 11:26:34 simple.go:305: Domain: www.baidu.com, Port: 80
2025/09/14 11:26:34 simple.go:117: address:www.baidu.com:80
2025/09/14 11:26:34 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy 127.82.255.183:20013
2025/09/14 11:26:34 main.go:829: ProxySelector 127.82.255.183:20013
2025/09/14 11:26:34 main.go:835: é€‰æ‹©çš„ä»£ç† URL: ws://localhost:28081
2025/09/14 11:26:34 simple.go:179: WebSocket Config Details:
2025/09/14 11:26:34 simple.go:180: host, portNum 127.82.255.183 20013
2025/09/14 11:26:34 simple.go:181:   Username: 
2025/09/14 11:26:34 simple.go:182:   Password: 
2025/09/14 11:26:34 simple.go:183:   ServerAddr: ws://localhost:28081
2025/09/14 11:26:34 simple.go:184:   Protocol: websocket
2025/09/14 11:26:34 simple.go:185:   Timeout: 30s
2025/09/14 11:26:34 client.go:107: url: ws://localhost:28081
2025/09/14 11:26:34 client.go:108: headers: map[X-Proxy-Target-Host:[127.82.255.183] X-Proxy-Target-Port:[20013]]
2025/09/14 11:26:34 client.go:119: url: http://localhost:28081
2025/09/14 11:26:34 client.go:120: headers: map[Connection:[Upgrade] Sec-Websocket-Accept:[wqIjpOxSaIxSVY13Cr3NsDFc3Zc=] Sec-Websocket-Extensions:[permessage-deflate; server_no_context_takeover; client_no_context_takeover] Upgrade:[websocket]]
2025/09/14 11:26:34 simple.go:209: WebSocketä»£ç†è¿žæŽ¥æˆåŠŸï¼š127.82.255.183:20013
2025/09/14 11:26:34 simple.go:248: clienthost: 127.0.0.1
2025/09/14 11:26:34 simple.go:249: clientport: 60210
2025/09/14 11:26:34 simple.go:278: simple Handle header:
2025/09/14 11:26:34 simple.go:281: simple Handle Forwarded : for=127.0.0.1;by=127.0.0.1:18080;host=www.baidu.com:80;proto=http
2025/09/14 11:26:34 simple.go:283: GET / HTTP/1.1
2025/09/14 11:26:34 simple.go:288: Forwarded: for=127.0.0.1;by=127.0.0.1:18080;host=www.baidu.com:80;proto=http
2025/09/14 11:26:34 simple.go:294: Host: www.baidu.com
User-Agent: Go-http-client/1.1
Accept-Encoding: gzip
2025/09/14 11:26:34 http.go:90: method: GET
2025/09/14 11:26:34 http.go:91: url: /
2025/09/14 11:26:34 http.go:92: host: www.baidu.com
2025/09/14 11:26:34 http.go:93: proxyHandler header:
2025/09/14 11:26:34 http.go:120: clienthost: 127.0.0.1
2025/09/14 11:26:34 http.go:121: clientport: 54030
2025/09/14 11:26:34 http.go:132: proxyHandler Forwarded : for=127.0.0.1;by=127.0.0.1:18080;host=www.baidu.com:80;proto=http,for=127.0.0.1;by=127.82.255.183:20013;host=www.baidu.com;proto=http
2025/09/14 11:26:34 http.go:132: proxyHandler User-Agent : Go-http-client/1.1
2025/09/14 11:26:34 http.go:132: proxyHandler Accept-Encoding : gzip
2025/09/14 11:26:34 http.go:135: forwardedHeader: for=127.0.0.1;by=127.0.0.1:18080;host=www.baidu.com:80;proto=http, for=127.0.0.1;by=127.82.255.183:20013;host=www.baidu.com;proto=http
2025/09/14 11:26:34 http.go:137: forwardedByList: [{127.0.0.1:18080} {127.82.255.183:20013}]
2025/09/14 11:26:34 http.go:155: targetUrl: http://www.baidu.com/
2025/09/14 11:26:34 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.baidu.com
2025/09/14 11:26:34 main.go:829: ProxySelector www.baidu.com
2025/09/14 11:26:34 main.go:835: é€‰æ‹©çš„ä»£ç† URL: ws://localhost:28081
2025/09/14 11:26:34 http.go:259: ä½¿ç”¨ä»£ç†ï¼šws://localhost:28081
2025/09/14 11:26:34 http.go:268: å·²ç»ä¿®æ”¹äº†ä»£ç†ä¸ºwebsocket ws://localhost:28081
2025/09/14 11:26:34 http.go:278: ä½¿ç”¨ä»£ç†ï¼šws://localhost:28081
2025/09/14 11:26:34 http.go:280: network,addr tcp www.baidu.com:80
2025/09/14 11:26:34 http.go:482: WebSocket Config Details:
2025/09/14 11:26:34 http.go:483: host, portNum www.baidu.com 80
2025/09/14 11:26:34 http.go:484:   Username: 
2025/09/14 11:26:34 http.go:485:   Password: 
2025/09/14 11:26:34 http.go:486:   ServerAddr: ws://localhost:28081
2025/09/14 11:26:34 http.go:487:   Protocol: websocket
2025/09/14 11:26:34 http.go:488:   Timeout: 30s
2025/09/14 11:26:34 http.go:492: host, portNum www.baidu.com 80
2025/09/14 11:26:34 client.go:107: url: ws://localhost:28081
2025/09/14 11:26:34 client.go:108: headers: map[X-Proxy-Target-Host:[www.baidu.com] X-Proxy-Target-Port:[80]]
2025/09/14 11:26:34 client.go:119: url: http://localhost:28081
2025/09/14 11:26:34 client.go:120: headers: map[Connection:[Upgrade] Sec-Websocket-Accept:[2jvmb8X/uLrwGbMiQ6rNgP4smRA=] Sec-Websocket-Extensions:[permessage-deflate; server_no_context_takeover; client_no_context_takeover] Upgrade:[websocket]]
[GIN] 2025/09/14 - 11:26:35 | 200 |  240.818846ms |       127.0.0.1 | GET      "/"
2025/09/14 11:26:37 simple.go:57: remote addr: [::1]:38318
2025/09/14 11:26:37 simple.go:79: HEAD http://www.baidu.com/ HTTP/1.1
2025/09/14 11:26:37 simple.go:305: Domain: www.baidu.com, Port: 80
2025/09/14 11:26:37 simple.go:117: address:www.baidu.com:80
2025/09/14 11:26:37 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy 127.82.255.183:20013
2025/09/14 11:26:37 main.go:829: ProxySelector 127.82.255.183:20013
2025/09/14 11:26:37 main.go:835: é€‰æ‹©çš„ä»£ç† URL: ws://localhost:28081
2025/09/14 11:26:37 simple.go:179: WebSocket Config Details:
2025/09/14 11:26:37 simple.go:180: host, portNum 127.82.255.183 20013
2025/09/14 11:26:37 simple.go:181:   Username: 
2025/09/14 11:26:37 simple.go:182:   Password: 
2025/09/14 11:26:37 simple.go:183:   ServerAddr: ws://localhost:28081
2025/09/14 11:26:37 simple.go:184:   Protocol: websocket
2025/09/14 11:26:37 simple.go:185:   Timeout: 30s
2025/09/14 11:26:37 client.go:107: url: ws://localhost:28081
2025/09/14 11:26:37 client.go:108: headers: map[X-Proxy-Target-Host:[127.82.255.183] X-Proxy-Target-Port:[20013]]
2025/09/14 11:26:37 client.go:119: url: http://localhost:28081
2025/09/14 11:26:37 client.go:120: headers: map[Connection:[Upgrade] Sec-Websocket-Accept:[MDur/YZRulqDOucOmgpZHG42X6Q=] Sec-Websocket-Extensions:[permessage-deflate; server_no_context_takeover; client_no_context_takeover] Upgrade:[websocket]]
2025/09/14 11:26:37 simple.go:209: WebSocketä»£ç†è¿žæŽ¥æˆåŠŸï¼š127.82.255.183:20013
2025/09/14 11:26:37 simple.go:248: clienthost: ::1
2025/09/14 11:26:37 simple.go:249: clientport: 38318
2025/09/14 11:26:37 simple.go:278: simple Handle header:
2025/09/14 11:26:37 simple.go:281: simple Handle Forwarded : for=::1;by=[::1]:18080;host=www.baidu.com:80;proto=http
2025/09/14 11:26:37 simple.go:283: HEAD / HTTP/1.1
2025/09/14 11:26:37 simple.go:288: Forwarded: for=::1;by=[::1]:18080;host=www.baidu.com:80;proto=http
2025/09/14 11:26:37 simple.go:294: Host: www.baidu.com
User-Agent: curl/8.15.0
Accept: */*
Proxy-Connection: Keep-Alive
2025/09/14 11:26:37 http.go:90: method: HEAD
2025/09/14 11:26:37 http.go:91: url: /
2025/09/14 11:26:37 http.go:92: host: www.baidu.com
2025/09/14 11:26:37 http.go:93: proxyHandler header:
2025/09/14 11:26:37 http.go:120: clienthost: 127.0.0.1
2025/09/14 11:26:37 http.go:121: clientport: 54044
2025/09/14 11:26:37 http.go:132: proxyHandler Forwarded : for=::1;by=[::1]:18080;host=www.baidu.com:80;proto=http,for=127.0.0.1;by=127.82.255.183:20013;host=www.baidu.com;proto=http
2025/09/14 11:26:37 http.go:132: proxyHandler User-Agent : curl/8.15.0
2025/09/14 11:26:37 http.go:132: proxyHandler Accept : */*
2025/09/14 11:26:37 http.go:132: proxyHandler Proxy-Connection : Keep-Alive
2025/09/14 11:26:37 http.go:135: forwardedHeader: for=::1;by=[::1]:18080;host=www.baidu.com:80;proto=http, for=127.0.0.1;by=127.82.255.183:20013;host=www.baidu.com;proto=http
2025/09/14 11:26:37 http.go:137: forwardedByList: [{[::1]:18080} {127.82.255.183:20013}]
2025/09/14 11:26:37 http.go:155: targetUrl: http://www.baidu.com/
2025/09/14 11:26:37 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.baidu.com
2025/09/14 11:26:37 main.go:829: ProxySelector www.baidu.com
2025/09/14 11:26:37 main.go:835: é€‰æ‹©çš„ä»£ç† URL: ws://localhost:28081
2025/09/14 11:26:37 http.go:259: ä½¿ç”¨ä»£ç†ï¼šws://localhost:28081
2025/09/14 11:26:37 http.go:268: å·²ç»ä¿®æ”¹äº†ä»£ç†ä¸ºwebsocket ws://localhost:28081
[GIN] 2025/09/14 - 11:26:37 | 200 |   50.037846ms |       127.0.0.1 | HEAD     "/"
2025/09/14 11:26:37 simple.go:57: remote addr: [::1]:38334
2025/09/14 11:26:37 simple.go:79: CONNECT www.baidu.com:443 HTTP/1.1
2025/09/14 11:26:37 simple.go:117: address:www.baidu.com:443
2025/09/14 11:26:37 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.baidu.com:443
2025/09/14 11:26:37 main.go:829: ProxySelector www.baidu.com:443
2025/09/14 11:26:37 main.go:835: é€‰æ‹©çš„ä»£ç† URL: ws://localhost:28081
2025/09/14 11:26:37 simple.go:179: WebSocket Config Details:
2025/09/14 11:26:37 simple.go:180: host, portNum www.baidu.com 443
2025/09/14 11:26:37 simple.go:181:   Username: 
2025/09/14 11:26:37 simple.go:182:   Password: 
2025/09/14 11:26:37 simple.go:183:   ServerAddr: ws://localhost:28081
2025/09/14 11:26:37 simple.go:184:   Protocol: websocket
2025/09/14 11:26:37 simple.go:185:   Timeout: 30s
2025/09/14 11:26:37 client.go:107: url: ws://localhost:28081
2025/09/14 11:26:37 client.go:108: headers: map[X-Proxy-Target-Host:[www.baidu.com] X-Proxy-Target-Port:[443]]
2025/09/14 11:26:37 client.go:119: url: http://localhost:28081
2025/09/14 11:26:37 client.go:120: headers: map[Connection:[Upgrade] Sec-Websocket-Accept:[OTCWPd0wFPnl1mXD4/L8lrpmY8c=] Sec-Websocket-Extensions:[permessage-deflate; server_no_context_takeover; client_no_context_takeover] Upgrade:[websocket]]
2025/09/14 11:26:37 simple.go:209: WebSocketä»£ç†è¿žæŽ¥æˆåŠŸï¼šwww.baidu.com:443
2025/09/14 11:26:37 simple.go:204: WebSocket ForwardData error: websocket: close 1006 (abnormal closure): unexpected EOF
2025/09/14 11:26:37 simple.go:204: WebSocket ForwardData error: websocket: close 1006 (abnormal closure): unexpected EOF
```

âœ… ç«¯å£18080å·²æˆåŠŸé‡Šæ”¾
âœ… ç«¯å£18080å·²æˆåŠŸé‡Šæ”¾


###

# DoH HTTPä»£ç†æœåŠ¡å™¨æµ‹è¯•

æ‰§è¡Œå‘½ä»¤: `go build -o main.exe ../cmd/main.go`

ç¼–è¯‘ä»£ç†æœåŠ¡å™¨...
âœ… ä»£ç†æœåŠ¡å™¨ç¼–è¯‘æˆåŠŸ

å¯åŠ¨ä»£ç†æœåŠ¡å™¨ï¼ˆDoHæ¨¡å¼ï¼‰...
æ‰§è¡Œå‘½ä»¤: `./main.exe -dohurl https://dns.alidns.com/dns-query -dohip 223.5.5.5 -dohip 223.6.6.6 -dohalpn h2 -dohalpn h3`

âœ… ä»£ç†æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ

å¼€å§‹æµ‹è¯•ä»£ç†åŠŸèƒ½...

âœ… 18080ç«¯å£è¢«å ç”¨ï¼Œä»£ç†æœåŠ¡å™¨è¿è¡Œæ­£å¸¸
æµ‹è¯•1: é€šè¿‡ä»£ç†è®¿é—®HTTPç½‘ç«™ (baidu.com)
âœ… æµ‹è¯•1æˆåŠŸ

æµ‹è¯•2: é€šè¿‡ä»£ç†è®¿é—®HTTPç½‘ç«™ (so.comï¼Œè·Ÿéšé‡å®šå‘)
âœ… æµ‹è¯•2æˆåŠŸ

æµ‹è¯•3: é€šè¿‡ä»£ç†è®¿é—®HTTPSç½‘ç«™ (baidu.com)
âœ… æµ‹è¯•3æˆåŠŸ



###

# DoH HTTPä»£ç†æœåŠ¡å™¨æµ‹è¯•

æ‰§è¡Œå‘½ä»¤: `go build -o main.exe ../cmd/main.go`

ç¼–è¯‘ä»£ç†æœåŠ¡å™¨...
âœ… ä»£ç†æœåŠ¡å™¨ç¼–è¯‘æˆåŠŸ

å¯åŠ¨ä»£ç†æœåŠ¡å™¨ï¼ˆDoHæ¨¡å¼ï¼‰...
æ‰§è¡Œå‘½ä»¤: `./main.exe -dohurl https://dns.alidns.com/dns-query -dohip 223.5.5.5 -dohip 223.6.6.6 -dohalpn h2 -dohalpn h3`

âœ… ä»£ç†æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ

å¼€å§‹æµ‹è¯•ä»£ç†åŠŸèƒ½...

âœ… 18080ç«¯å£è¢«å ç”¨ï¼Œä»£ç†æœåŠ¡å™¨è¿è¡Œæ­£å¸¸
æµ‹è¯•1: é€šè¿‡ä»£ç†è®¿é—®HTTPç½‘ç«™ (baidu.com)
âœ… æµ‹è¯•1æˆåŠŸ

æµ‹è¯•2: é€šè¿‡ä»£ç†è®¿é—®HTTPç½‘ç«™ (so.comï¼Œè·Ÿéšé‡å®šå‘)
âœ… æµ‹è¯•2æˆåŠŸ

æµ‹è¯•3: é€šè¿‡ä»£ç†è®¿é—®HTTPSç½‘ç«™ (baidu.com)
âœ… æµ‹è¯•3æˆåŠŸ

### ä»£ç†æœåŠ¡å™¨æ—¥å¿—è¾“å‡º

```
2025/09/14 11:26:41 main.go:519: ä»£ç†æœåŠ¡å™¨å¯åŠ¨ä¸­...
2025/09/14 11:26:41 main.go:563: dohalpn: [h2, h3]
2025/09/14 11:26:41 main.go:565: hostname: 0.0.0.0
2025/09/14 11:26:41 main.go:567: port: 18080
2025/09/14 11:26:41 main.go:569: server_cert: 
2025/09/14 11:26:41 main.go:571: server_key: 
2025/09/14 11:26:41 main.go:573: username: 
2025/09/14 11:26:41 main.go:575: password: 
2025/09/14 11:26:41 main.go:577: dohurl: [https://dns.alidns.com/dns-query, https://dns.alidns.com/dns-query]
2025/09/14 11:26:41 main.go:579: dohip: [223.5.5.5, 223.6.6.6]
2025/09/14 11:26:41 main.go:580: upstream-type: 
2025/09/14 11:26:41 main.go:581: upstream-address: 
2025/09/14 11:26:41 main.go:582: upstream-username: 
2025/09/14 11:26:41 main.go:583: upstream-password: 
2025/09/14 11:26:41 main.go:898: null
2025/09/14 11:26:41 simple.go:31: Proxy server started on port [::]:18080
2025/09/14 11:26:41 http.go:388: Random IP: 127.60.236.52
2025/09/14 11:26:41 http.go:406: Random integer: 12090
2025/09/14 11:26:41 http.go:358: Proxy server started on port 127.60.236.52:12090
2025/09/14 11:26:43 simple.go:57: remote addr: 127.0.0.1:37716
2025/09/14 11:26:43 simple.go:79: GET http://www.baidu.com/ HTTP/1.1
2025/09/14 11:26:43 simple.go:305: Domain: www.baidu.com, Port: 80
2025/09/14 11:26:43 simple.go:117: address:www.baidu.com:80
2025/09/14 11:26:43 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy 127.60.236.52:12090
2025/09/14 11:26:43 simple.go:234: è¿žæŽ¥æˆåŠŸï¼š127.60.236.52:12090
2025/09/14 11:26:43 simple.go:248: clienthost: 127.0.0.1
2025/09/14 11:26:43 simple.go:249: clientport: 37716
2025/09/14 11:26:43 simple.go:278: simple Handle header:
2025/09/14 11:26:43 simple.go:281: simple Handle Forwarded : for=127.0.0.1;by=127.0.0.1:18080;host=www.baidu.com:80;proto=http
2025/09/14 11:26:43 simple.go:283: GET / HTTP/1.1
2025/09/14 11:26:43 simple.go:288: Forwarded: for=127.0.0.1;by=127.0.0.1:18080;host=www.baidu.com:80;proto=http
2025/09/14 11:26:43 simple.go:294: Host: www.baidu.com
User-Agent: Go-http-client/1.1
Accept-Encoding: gzip
2025/09/14 11:26:43 http.go:90: method: GET
2025/09/14 11:26:43 http.go:91: url: /
2025/09/14 11:26:43 http.go:92: host: www.baidu.com
2025/09/14 11:26:43 http.go:93: proxyHandler header:
2025/09/14 11:26:43 http.go:120: clienthost: 127.0.0.1
2025/09/14 11:26:43 http.go:121: clientport: 54332
2025/09/14 11:26:43 http.go:132: proxyHandler User-Agent : Go-http-client/1.1
2025/09/14 11:26:43 http.go:132: proxyHandler Accept-Encoding : gzip
2025/09/14 11:26:43 http.go:132: proxyHandler Forwarded : for=127.0.0.1;by=127.0.0.1:18080;host=www.baidu.com:80;proto=http,for=127.0.0.1;by=127.60.236.52:12090;host=www.baidu.com;proto=http
2025/09/14 11:26:43 http.go:135: forwardedHeader: for=127.0.0.1;by=127.0.0.1:18080;host=www.baidu.com:80;proto=http, for=127.0.0.1;by=127.60.236.52:12090;host=www.baidu.com;proto=http
2025/09/14 11:26:43 http.go:137: forwardedByList: [{127.0.0.1:18080} {127.60.236.52:12090}]
2025/09/14 11:26:43 http.go:155: targetUrl: http://www.baidu.com/
2025/09/14 11:26:43 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.baidu.com
2025/09/14 11:26:43 options.go:186: hostname www.baidu.com no ip found
2025/09/14 11:26:43 doh3.go:15: domain: www.baidu.com dnstype: A,AAAA dohurl: https://dns.alidns.com/dns-query
2025/09/14 11:26:43 doh3.go:27: domain: www.baidu.com dnstype: AAAA dohurl: https://dns.alidns.com/dns-query
2025/09/14 11:26:43 doh3.go:27: domain: www.baidu.com dnstype: A dohurl: https://dns.alidns.com/dns-query
2025/09/14 11:26:43 h3.go:60: http3è¿žæŽ¥æˆåŠŸ dns.alidns.com 443 [::]:45455 223.6.6.6:443
2025/09/14 11:26:43 h3.go:60: http3è¿žæŽ¥æˆåŠŸ dns.alidns.com 443 [::]:47761 223.6.6.6:443
2025/09/14 11:26:43 doh3.go:80: dns resolved www.baidu.com ips:[36.152.44.93,36.152.44.132,2409:8c20:6:123c:0:ff:b0f6:b2d,2409:8c20:6:1794:0:ff:b080:87f0]
2025/09/14 11:26:43 options.go:240: success connect to address=www.baidu.com:80 by network=tcp by Dohurl=https://dns.alidns.com/dns-query by dohip=223.6.6.6 by serverIP=2409:8c20:6:1794:0:ff:b080:87f0
[GIN] 2025/09/14 - 11:26:43 | 200 |  203.803693ms |       127.0.0.1 | GET      "/"
2025/09/14 11:26:43 simple.go:57: remote addr: [::1]:53728
2025/09/14 11:26:43 simple.go:79: HEAD http://www.baidu.com/ HTTP/1.1
2025/09/14 11:26:43 simple.go:305: Domain: www.baidu.com, Port: 80
2025/09/14 11:26:43 simple.go:117: address:www.baidu.com:80
2025/09/14 11:26:43 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy 127.60.236.52:12090
2025/09/14 11:26:43 simple.go:234: è¿žæŽ¥æˆåŠŸï¼š127.60.236.52:12090
2025/09/14 11:26:43 simple.go:248: clienthost: ::1
2025/09/14 11:26:43 simple.go:249: clientport: 53728
2025/09/14 11:26:43 simple.go:278: simple Handle header:
2025/09/14 11:26:43 simple.go:281: simple Handle Forwarded : for=::1;by=[::1]:18080;host=www.baidu.com:80;proto=http
2025/09/14 11:26:43 simple.go:283: HEAD / HTTP/1.1
2025/09/14 11:26:43 simple.go:288: Forwarded: for=::1;by=[::1]:18080;host=www.baidu.com:80;proto=http
2025/09/14 11:26:43 simple.go:294: Host: www.baidu.com
User-Agent: curl/8.15.0
Accept: */*
Proxy-Connection: Keep-Alive
2025/09/14 11:26:43 http.go:90: method: HEAD
2025/09/14 11:26:43 http.go:91: url: /
2025/09/14 11:26:43 http.go:92: host: www.baidu.com
2025/09/14 11:26:43 http.go:93: proxyHandler header:
2025/09/14 11:26:43 http.go:120: clienthost: 127.0.0.1
2025/09/14 11:26:43 http.go:121: clientport: 54344
2025/09/14 11:26:43 http.go:132: proxyHandler User-Agent : curl/8.15.0
2025/09/14 11:26:43 http.go:132: proxyHandler Accept : */*
2025/09/14 11:26:43 http.go:132: proxyHandler Proxy-Connection : Keep-Alive
2025/09/14 11:26:43 http.go:132: proxyHandler Forwarded : for=::1;by=[::1]:18080;host=www.baidu.com:80;proto=http,for=127.0.0.1;by=127.60.236.52:12090;host=www.baidu.com;proto=http
2025/09/14 11:26:43 http.go:135: forwardedHeader: for=::1;by=[::1]:18080;host=www.baidu.com:80;proto=http, for=127.0.0.1;by=127.60.236.52:12090;host=www.baidu.com;proto=http
2025/09/14 11:26:43 http.go:137: forwardedByList: [{[::1]:18080} {127.60.236.52:12090}]
2025/09/14 11:26:43 http.go:155: targetUrl: http://www.baidu.com/
2025/09/14 11:26:43 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.baidu.com
2025/09/14 11:26:43 options.go:186: hostname www.baidu.com no ip found
2025/09/14 11:26:43 doh.go:16: domain: www.baidu.com dnstype: A,AAAA dohurl: https://dns.alidns.com/dns-query
2025/09/14 11:26:43 doh.go:28: domain: www.baidu.com dnstype: AAAA dohurl: https://dns.alidns.com/dns-query
2025/09/14 11:26:43 dns.go:247: å¼€å§‹å‘èµ·dohè¯·æ±‚ https://dns.alidns.com/dns-query
2025/09/14 11:26:43 dns.go:135: DialTLSContext dialing tcp to dns.alidns.com:443
2025/09/14 11:26:43 dns.go:165: DialTLSContext dialing tcp to 223.5.5.5:443
2025/09/14 11:26:43 doh.go:28: domain: www.baidu.com dnstype: A dohurl: https://dns.alidns.com/dns-query
2025/09/14 11:26:43 dns.go:247: å¼€å§‹å‘èµ·dohè¯·æ±‚ https://dns.alidns.com/dns-query
2025/09/14 11:26:43 dns.go:135: DialTLSContext dialing tcp to dns.alidns.com:443
2025/09/14 11:26:43 dns.go:165: DialTLSContext dialing tcp to 223.5.5.5:443
2025/09/14 11:26:43 doh.go:91: dns resolved www.baidu.com ips:[2409:8c20:6:123c:0:ff:b0f6:b2d,2409:8c20:6:1794:0:ff:b080:87f0,36.152.44.132,36.152.44.93]
2025/09/14 11:26:43 options.go:240: success connect to address=www.baidu.com:80 by network=tcp by Dohurl=https://dns.alidns.com/dns-query by dohip=223.5.5.5 by serverIP=36.152.44.132
[GIN] 2025/09/14 - 11:26:43 | 200 |  130.272384ms |       127.0.0.1 | HEAD     "/"
2025/09/14 11:26:43 simple.go:57: remote addr: [::1]:53738
2025/09/14 11:26:43 simple.go:79: HEAD http://www.so.com/ HTTP/1.1
2025/09/14 11:26:43 simple.go:305: Domain: www.so.com, Port: 80
2025/09/14 11:26:43 simple.go:117: address:www.so.com:80
2025/09/14 11:26:43 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy 127.60.236.52:12090
2025/09/14 11:26:43 simple.go:234: è¿žæŽ¥æˆåŠŸï¼š127.60.236.52:12090
2025/09/14 11:26:43 simple.go:248: clienthost: ::1
2025/09/14 11:26:43 simple.go:249: clientport: 53738
2025/09/14 11:26:43 simple.go:278: simple Handle header:
2025/09/14 11:26:43 simple.go:281: simple Handle Forwarded : for=::1;by=[::1]:18080;host=www.so.com:80;proto=http
2025/09/14 11:26:43 simple.go:283: HEAD / HTTP/1.1
2025/09/14 11:26:43 simple.go:288: Forwarded: for=::1;by=[::1]:18080;host=www.so.com:80;proto=http
2025/09/14 11:26:43 simple.go:294: Host: www.so.com
User-Agent: curl/8.15.0
Accept: */*
Proxy-Connection: Keep-Alive
2025/09/14 11:26:43 http.go:90: method: HEAD
2025/09/14 11:26:43 http.go:91: url: /
2025/09/14 11:26:43 http.go:92: host: www.so.com
2025/09/14 11:26:43 http.go:93: proxyHandler header:
2025/09/14 11:26:43 http.go:120: clienthost: 127.0.0.1
2025/09/14 11:26:43 http.go:121: clientport: 54356
2025/09/14 11:26:43 http.go:132: proxyHandler Forwarded : for=::1;by=[::1]:18080;host=www.so.com:80;proto=http,for=127.0.0.1;by=127.60.236.52:12090;host=www.so.com;proto=http
2025/09/14 11:26:43 http.go:132: proxyHandler User-Agent : curl/8.15.0
2025/09/14 11:26:43 http.go:132: proxyHandler Accept : */*
2025/09/14 11:26:43 http.go:132: proxyHandler Proxy-Connection : Keep-Alive
2025/09/14 11:26:43 http.go:135: forwardedHeader: for=::1;by=[::1]:18080;host=www.so.com:80;proto=http, for=127.0.0.1;by=127.60.236.52:12090;host=www.so.com;proto=http
2025/09/14 11:26:43 http.go:137: forwardedByList: [{[::1]:18080} {127.60.236.52:12090}]
2025/09/14 11:26:43 http.go:155: targetUrl: http://www.so.com/
2025/09/14 11:26:43 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.so.com
2025/09/14 11:26:43 options.go:186: hostname www.so.com no ip found
2025/09/14 11:26:43 doh3.go:15: domain: www.so.com dnstype: A,AAAA dohurl: https://dns.alidns.com/dns-query
2025/09/14 11:26:43 doh3.go:27: domain: www.so.com dnstype: AAAA dohurl: https://dns.alidns.com/dns-query
2025/09/14 11:26:43 doh3.go:27: domain: www.so.com dnstype: A dohurl: https://dns.alidns.com/dns-query
2025/09/14 11:26:44 h3.go:60: http3è¿žæŽ¥æˆåŠŸ dns.alidns.com 443 [::]:57640 223.6.6.6:443
2025/09/14 11:26:44 h3.go:60: http3è¿žæŽ¥æˆåŠŸ dns.alidns.com 443 [::]:38902 223.6.6.6:443
2025/09/14 11:26:44 doh3.go:80: dns resolved www.so.com ips:[111.7.73.43,111.7.73.42]
2025/09/14 11:26:44 options.go:240: success connect to address=www.so.com:80 by network=tcp by Dohurl=https://dns.alidns.com/dns-query by dohip=223.6.6.6 by serverIP=111.7.73.43
[GIN] 2025/09/14 - 11:26:44 | 302 |  243.359461ms |       127.0.0.1 | HEAD     "/"
2025/09/14 11:26:44 simple.go:57: remote addr: [::1]:53744
2025/09/14 11:26:44 simple.go:79: CONNECT www.so.com:443 HTTP/1.1
2025/09/14 11:26:44 simple.go:117: address:www.so.com:443
2025/09/14 11:26:44 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.so.com:443
2025/09/14 11:26:44 options.go:98: hostname www.so.com no ip found
2025/09/14 11:26:44 options.go:186: hostname www.so.com no ip found
2025/09/14 11:26:44 doh.go:16: domain: www.so.com dnstype: A,AAAA dohurl: https://dns.alidns.com/dns-query
2025/09/14 11:26:44 doh.go:28: domain: www.so.com dnstype: AAAA dohurl: https://dns.alidns.com/dns-query
2025/09/14 11:26:44 dns.go:247: å¼€å§‹å‘èµ·dohè¯·æ±‚ https://dns.alidns.com/dns-query
2025/09/14 11:26:44 dns.go:135: DialTLSContext dialing tcp to dns.alidns.com:443
2025/09/14 11:26:44 dns.go:165: DialTLSContext dialing tcp to 223.5.5.5:443
2025/09/14 11:26:44 doh.go:28: domain: www.so.com dnstype: A dohurl: https://dns.alidns.com/dns-query
2025/09/14 11:26:44 dns.go:247: å¼€å§‹å‘èµ·dohè¯·æ±‚ https://dns.alidns.com/dns-query
2025/09/14 11:26:44 dns.go:135: DialTLSContext dialing tcp to dns.alidns.com:443
2025/09/14 11:26:44 dns.go:165: DialTLSContext dialing tcp to 223.5.5.5:443
2025/09/14 11:26:44 doh.go:91: dns resolved www.so.com ips:[111.7.73.43,111.7.73.42]
2025/09/14 11:26:44 options.go:240: success connect to address=www.so.com:443 by network=tcp by Dohurl=https://dns.alidns.com/dns-query by dohip=223.5.5.5 by serverIP=111.7.73.43
2025/09/14 11:26:44 simple.go:234: è¿žæŽ¥æˆåŠŸï¼šwww.so.com:443
2025/09/14 11:26:44 simple.go:57: remote addr: [::1]:53758
2025/09/14 11:26:44 simple.go:79: CONNECT www.baidu.com:443 HTTP/1.1
2025/09/14 11:26:44 simple.go:117: address:www.baidu.com:443
2025/09/14 11:26:44 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.baidu.com:443
2025/09/14 11:26:44 options.go:98: hostname www.baidu.com no ip found
2025/09/14 11:26:44 options.go:186: hostname www.baidu.com no ip found
2025/09/14 11:26:44 doh3.go:15: domain: www.baidu.com dnstype: A,AAAA dohurl: https://dns.alidns.com/dns-query
2025/09/14 11:26:44 doh3.go:27: domain: www.baidu.com dnstype: A dohurl: https://dns.alidns.com/dns-query
2025/09/14 11:26:44 doh3.go:27: domain: www.baidu.com dnstype: AAAA dohurl: https://dns.alidns.com/dns-query
2025/09/14 11:26:44 h3.go:60: http3è¿žæŽ¥æˆåŠŸ dns.alidns.com 443 [::]:33093 223.6.6.6:443
2025/09/14 11:26:44 h3.go:60: http3è¿žæŽ¥æˆåŠŸ dns.alidns.com 443 [::]:53931 223.6.6.6:443
2025/09/14 11:26:44 doh3.go:80: dns resolved www.baidu.com ips:[2409:8c20:6:123c:0:ff:b0f6:b2d,2409:8c20:6:1794:0:ff:b080:87f0,36.152.44.93,36.152.44.132]
2025/09/14 11:26:44 options.go:240: success connect to address=www.baidu.com:443 by network=tcp by Dohurl=https://dns.alidns.com/dns-query by dohip=223.6.6.6 by serverIP=36.152.44.93
2025/09/14 11:26:44 simple.go:234: è¿žæŽ¥æˆåŠŸï¼šwww.baidu.com:443
```



###

# HTTPä»£ç†æœåŠ¡å™¨æµ‹è¯•è®°å½•

## æµ‹è¯•æ—¶é—´
2025-09-14 11:26:45

## 1. å¯åŠ¨ä»£ç†æœåŠ¡å™¨

æ‰§è¡Œå‘½ä»¤: `go run -v ../cmd/main.go`

ç¼–è¯‘ä»£ç†æœåŠ¡å™¨...
âœ… ä»£ç†æœåŠ¡å™¨ç¼–è¯‘æˆåŠŸ

ðŸ“‹ ä»£ç†æœåŠ¡å™¨è¿›ç¨‹PID: 27990

ç­‰å¾…æœåŠ¡å™¨å¯åŠ¨...
âœ… ä»£ç†æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ

## 2. æµ‹è¯•HTTPä»£ç†åŠŸèƒ½

### æµ‹è¯•1: åŸºæœ¬HTTPä»£ç†

æ‰§è¡Œå‘½ä»¤: `curl -v -I http://www.baidu.com -x http://localhost:18080`

ðŸ“‹ Curlæµ‹è¯•1è¿›ç¨‹PID: 28006

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
* Host localhost:18080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:18080...
* Connected to localhost (::1) port 18080
* using HTTP/1.x
> HEAD http://www.baidu.com/ HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.15.0
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Bdpagetype: 1
< Bdqid: 0xc310dc9c00822c0b
< Connection: keep-alive
< Content-Length: 654884
< Content-Type: text/html; charset=utf-8
< Date: Sun, 14 Sep 2025 11:26:50 GMT
< Server: BWS/1.1
< Set-Cookie: BIDUPSID=ECC01D5BEA976C123C45B959B8CA202A; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
< Set-Cookie: PSTM=1757849210; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
< Set-Cookie: BDSVRTM=0; path=/
< Set-Cookie: BD_HOME=1; path=/
< Set-Cookie: BAIDUID=ECC01D5BEA976C123C45B959B8CA202A:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000
< Set-Cookie: BAIDUID_BFESS=ECC01D5BEA976C123C45B959B8CA202A:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000; Secure; SameSite=None
< Tr_id: super_0xc310dc9c00822c0b
< Traceid: 1757849210046571265014055976999604857867
< Vary: Accept-Encoding
< X-Ua-Compatible: IE=Edge,chrome=1
< X-Xss-Protection: 1;mode=block
< 
  0  639k    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 OK
Bdpagetype: 1
Bdqid: 0xc310dc9c00822c0b
Connection: keep-alive
Content-Length: 654884
Content-Type: text/html; charset=utf-8
Date: Sun, 14 Sep 2025 11:26:50 GMT
Server: BWS/1.1
Set-Cookie: BIDUPSID=ECC01D5BEA976C123C45B959B8CA202A; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
Set-Cookie: PSTM=1757849210; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
Set-Cookie: BDSVRTM=0; path=/
Set-Cookie: BD_HOME=1; path=/
Set-Cookie: BAIDUID=ECC01D5BEA976C123C45B959B8CA202A:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000
Set-Cookie: BAIDUID_BFESS=ECC01D5BEA976C123C45B959B8CA202A:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000; Secure; SameSite=None
Tr_id: super_0xc310dc9c00822c0b
Traceid: 1757849210046571265014055976999604857867
Vary: Accept-Encoding
X-Ua-Compatible: IE=Edge,chrome=1
X-Xss-Protection: 1;mode=block


```

### æµ‹è¯•2: HTTPä»£ç†www.so.com

æ‰§è¡Œå‘½ä»¤: `curl -v -I http://www.so.com -x http://localhost:18080 -L`

ðŸ“‹ Curlæµ‹è¯•2è¿›ç¨‹PID: 28007

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
* Host localhost:18080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:18080...
* Connected to localhost (::1) port 18080
* using HTTP/1.x
> HEAD http://www.so.com/ HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.15.0
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 302 Found
< Connection: keep-alive
< Content-Type: text/html
< Date: Sun, 14 Sep 2025 11:26:51 GMT
< Location: https://www.so.com/
< Server: openresty
< Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/
* Ignoring the response-body
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
* Clear auth, redirects to port from 80 to 443
* Issue another request to this URL: 'https://www.so.com/'
* Hostname localhost was found in DNS cache
*   Trying [::1]:18080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.so.com:443
> CONNECT www.so.com:443 HTTP/1.1
> Host: www.so.com:443
> User-Agent: curl/8.15.0
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
} [5 bytes data]
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [1563 bytes data]
*  CAfile: /data/data/com.termux/files/usr/etc/tls/cert.pem
*  CApath: /data/data/com.termux/files/usr/etc/tls/certs
{ [5 bytes data]
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [93 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [5077 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / secp256r1 / rsaEncryption
* ALPN: server did not agree on a protocol. Uses default.
* Server certificate:
*  subject: CN=*.so.com
*  start date: Aug 28 00:00:00 2025 GMT
*  expire date: Sep 28 23:59:59 2026 GMT
*  subjectAltName: host "www.so.com" matched cert's "*.so.com"
*  issuer: C=CN; O=WoTrus CA Limited; CN=WoTrus DV Server CA  [Run by the Issuer]
*  SSL certificate verify ok.
*   Certificate level 0: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type RSA (2048/112 Bits/secBits), signed using sha384WithRSAEncryption
*   Certificate level 2: Public key type RSA (4096/152 Bits/secBits), signed using sha384WithRSAEncryption
* Connected to localhost (::1) port 18080
* using HTTP/1.x
} [5 bytes data]
> HEAD / HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.15.0
> Accept: */*
> 
* Request completely sent off
{ [5 bytes data]
< HTTP/1.1 200 OK
< Server: openresty
< Date: Sun, 14 Sep 2025 11:26:51 GMT
< Content-Type: text/html; charset=UTF-8
< Connection: keep-alive
< Vary: Accept-Encoding
< Set-Cookie: _S=b0ajv94npnp219m8h7c45tune6; expires=Sun, 14-Sep-2025 11:36:51 GMT; Max-Age=600; path=/
< Expires: Thu, 19 Nov 1981 08:52:00 GMT
< Cache-Control: no-store, no-cache, must-revalidate
< Pragma: no-cache
< php-waf-rep: -
< Set-Cookie: QiHooGUID=758709049F32A379A7AB515C54E7E091.1757849211460; Max-Age=63072000; Domain=so.com; Path=/
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #1 to host localhost left intact
HTTP/1.1 302 Found
Connection: keep-alive
Content-Type: text/html
Date: Sun, 14 Sep 2025 11:26:51 GMT
Location: https://www.so.com/
Server: openresty
Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/

HTTP/1.1 200 Connection established

HTTP/1.1 200 OK
Server: openresty
Date: Sun, 14 Sep 2025 11:26:51 GMT
Content-Type: text/html; charset=UTF-8
Connection: keep-alive
Vary: Accept-Encoding
Set-Cookie: _S=b0ajv94npnp219m8h7c45tune6; expires=Sun, 14-Sep-2025 11:36:51 GMT; Max-Age=600; path=/
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate
Pragma: no-cache
php-waf-rep: -
Set-Cookie: QiHooGUID=758709049F32A379A7AB515C54E7E091.1757849211460; Max-Age=63072000; Domain=so.com; Path=/


```

### æµ‹è¯•3: HTTPSä»£ç†

æ‰§è¡Œå‘½ä»¤: `curl -v -I https://www.baidu.com -x http://localhost:18080`

ðŸ“‹ Curlæµ‹è¯•3è¿›ç¨‹PID: 28015

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
* Host localhost:18080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:18080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.baidu.com:443
> CONNECT www.baidu.com:443 HTTP/1.1
> Host: www.baidu.com:443
> User-Agent: curl/8.15.0
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
} [5 bytes data]
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [1566 bytes data]
*  CAfile: /data/data/com.termux/files/usr/etc/tls/cert.pem
*  CApath: /data/data/com.termux/files/usr/etc/tls/certs
{ [5 bytes data]
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [102 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [4771 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / secp256r1 / RSASSA-PSS
* ALPN: server accepted http/1.1
* Server certificate:
*  subject: C=CN; ST=beijing; L=beijing; O=Beijing Baidu Netcom Science Technology Co., Ltd; CN=baidu.com
*  start date: Jul  9 07:01:02 2025 GMT
*  expire date: Aug 10 07:01:01 2026 GMT
*  subjectAltName: host "www.baidu.com" matched cert's "*.baidu.com"
*  issuer: C=BE; O=GlobalSign nv-sa; CN=GlobalSign RSA OV SSL CA 2018
*  SSL certificate verify ok.
*   Certificate level 0: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 2: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
* Connected to localhost (::1) port 18080
* using HTTP/1.x
} [5 bytes data]
> HEAD / HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.15.0
> Accept: */*
> 
* Request completely sent off
{ [5 bytes data]
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: no-cache
< Connection: keep-alive
< Content-Length: 227
< Content-Security-Policy: frame-ancestors 'self' https://chat.baidu.com http://mirror-chat.baidu.com https://fj-chat.baidu.com https://hba-chat.baidu.com https://hbe-chat.baidu.com https://njjs-chat.baidu.com https://nj-chat.baidu.com https://hna-chat.baidu.com https://hnb-chat.baidu.com http://debug.baidu-int.com https://sai.baidu.com https://mcpstore.baidu.com https://mcpserver.baidu.com https://www.mcpworld.com https://platform-openai.now.baidu.com;
< Content-Type: text/html
< Date: Sun, 14 Sep 2025 11:26:51 GMT
< Pragma: no-cache
< Server: BWS/1.1
< Set-Cookie: BD_NOT_HTTPS=1; path=/; Max-Age=300
< Set-Cookie: PSTM=1757849211; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
< Set-Cookie: BAIDUID=0AFC72E4989669FBF7C91BCA1345861C:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000
< Set-Cookie: BAIDUID_BFESS=0AFC72E4989669FBF7C91BCA1345861C:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000; Secure; SameSite=None
< Traceid: 1757849211192526490612557163026824380060
< X-Ua-Compatible: IE=Edge,chrome=1
< X-Xss-Protection: 1;mode=block
{ [5 bytes data]
< 
  0   227    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 Connection established

HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: no-cache
Connection: keep-alive
Content-Length: 227
Content-Security-Policy: frame-ancestors 'self' https://chat.baidu.com http://mirror-chat.baidu.com https://fj-chat.baidu.com https://hba-chat.baidu.com https://hbe-chat.baidu.com https://njjs-chat.baidu.com https://nj-chat.baidu.com https://hna-chat.baidu.com https://hnb-chat.baidu.com http://debug.baidu-int.com https://sai.baidu.com https://mcpstore.baidu.com https://mcpserver.baidu.com https://www.mcpworld.com https://platform-openai.now.baidu.com;
Content-Type: text/html
Date: Sun, 14 Sep 2025 11:26:51 GMT
Pragma: no-cache
Server: BWS/1.1
Set-Cookie: BD_NOT_HTTPS=1; path=/; Max-Age=300
Set-Cookie: PSTM=1757849211; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
Set-Cookie: BAIDUID=0AFC72E4989669FBF7C91BCA1345861C:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000
Set-Cookie: BAIDUID_BFESS=0AFC72E4989669FBF7C91BCA1345861C:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000; Secure; SameSite=None
Traceid: 1757849211192526490612557163026824380060
X-Ua-Compatible: IE=Edge,chrome=1
X-Xss-Protection: 1;mode=block


```

### ðŸ“‹ æ‰€æœ‰è¿›ç¨‹PIDè®°å½•

æ‰€æœ‰è¿›ç¨‹PID: 27890, 27990, 27990, 28006, 28006, 28007, 28007, 28015, 28015



###

# HTTPä»£ç†æœåŠ¡å™¨æµ‹è¯•è®°å½•

## æµ‹è¯•æ—¶é—´
2025-09-14 11:26:45

## 1. å¯åŠ¨ä»£ç†æœåŠ¡å™¨

æ‰§è¡Œå‘½ä»¤: `go run -v ../cmd/main.go`

ç¼–è¯‘ä»£ç†æœåŠ¡å™¨...
âœ… ä»£ç†æœåŠ¡å™¨ç¼–è¯‘æˆåŠŸ

ðŸ“‹ ä»£ç†æœåŠ¡å™¨è¿›ç¨‹PID: 27990

ç­‰å¾…æœåŠ¡å™¨å¯åŠ¨...
âœ… ä»£ç†æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ

## 2. æµ‹è¯•HTTPä»£ç†åŠŸèƒ½

### æµ‹è¯•1: åŸºæœ¬HTTPä»£ç†

æ‰§è¡Œå‘½ä»¤: `curl -v -I http://www.baidu.com -x http://localhost:18080`

ðŸ“‹ Curlæµ‹è¯•1è¿›ç¨‹PID: 28006

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
* Host localhost:18080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:18080...
* Connected to localhost (::1) port 18080
* using HTTP/1.x
> HEAD http://www.baidu.com/ HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.15.0
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Bdpagetype: 1
< Bdqid: 0xc310dc9c00822c0b
< Connection: keep-alive
< Content-Length: 654884
< Content-Type: text/html; charset=utf-8
< Date: Sun, 14 Sep 2025 11:26:50 GMT
< Server: BWS/1.1
< Set-Cookie: BIDUPSID=ECC01D5BEA976C123C45B959B8CA202A; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
< Set-Cookie: PSTM=1757849210; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
< Set-Cookie: BDSVRTM=0; path=/
< Set-Cookie: BD_HOME=1; path=/
< Set-Cookie: BAIDUID=ECC01D5BEA976C123C45B959B8CA202A:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000
< Set-Cookie: BAIDUID_BFESS=ECC01D5BEA976C123C45B959B8CA202A:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000; Secure; SameSite=None
< Tr_id: super_0xc310dc9c00822c0b
< Traceid: 1757849210046571265014055976999604857867
< Vary: Accept-Encoding
< X-Ua-Compatible: IE=Edge,chrome=1
< X-Xss-Protection: 1;mode=block
< 
  0  639k    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 OK
Bdpagetype: 1
Bdqid: 0xc310dc9c00822c0b
Connection: keep-alive
Content-Length: 654884
Content-Type: text/html; charset=utf-8
Date: Sun, 14 Sep 2025 11:26:50 GMT
Server: BWS/1.1
Set-Cookie: BIDUPSID=ECC01D5BEA976C123C45B959B8CA202A; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
Set-Cookie: PSTM=1757849210; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
Set-Cookie: BDSVRTM=0; path=/
Set-Cookie: BD_HOME=1; path=/
Set-Cookie: BAIDUID=ECC01D5BEA976C123C45B959B8CA202A:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000
Set-Cookie: BAIDUID_BFESS=ECC01D5BEA976C123C45B959B8CA202A:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000; Secure; SameSite=None
Tr_id: super_0xc310dc9c00822c0b
Traceid: 1757849210046571265014055976999604857867
Vary: Accept-Encoding
X-Ua-Compatible: IE=Edge,chrome=1
X-Xss-Protection: 1;mode=block


```

### æµ‹è¯•2: HTTPä»£ç†www.so.com

æ‰§è¡Œå‘½ä»¤: `curl -v -I http://www.so.com -x http://localhost:18080 -L`

ðŸ“‹ Curlæµ‹è¯•2è¿›ç¨‹PID: 28007

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
* Host localhost:18080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:18080...
* Connected to localhost (::1) port 18080
* using HTTP/1.x
> HEAD http://www.so.com/ HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.15.0
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 302 Found
< Connection: keep-alive
< Content-Type: text/html
< Date: Sun, 14 Sep 2025 11:26:51 GMT
< Location: https://www.so.com/
< Server: openresty
< Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/
* Ignoring the response-body
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
* Clear auth, redirects to port from 80 to 443
* Issue another request to this URL: 'https://www.so.com/'
* Hostname localhost was found in DNS cache
*   Trying [::1]:18080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.so.com:443
> CONNECT www.so.com:443 HTTP/1.1
> Host: www.so.com:443
> User-Agent: curl/8.15.0
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
} [5 bytes data]
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [1563 bytes data]
*  CAfile: /data/data/com.termux/files/usr/etc/tls/cert.pem
*  CApath: /data/data/com.termux/files/usr/etc/tls/certs
{ [5 bytes data]
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [93 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [5077 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / secp256r1 / rsaEncryption
* ALPN: server did not agree on a protocol. Uses default.
* Server certificate:
*  subject: CN=*.so.com
*  start date: Aug 28 00:00:00 2025 GMT
*  expire date: Sep 28 23:59:59 2026 GMT
*  subjectAltName: host "www.so.com" matched cert's "*.so.com"
*  issuer: C=CN; O=WoTrus CA Limited; CN=WoTrus DV Server CA  [Run by the Issuer]
*  SSL certificate verify ok.
*   Certificate level 0: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type RSA (2048/112 Bits/secBits), signed using sha384WithRSAEncryption
*   Certificate level 2: Public key type RSA (4096/152 Bits/secBits), signed using sha384WithRSAEncryption
* Connected to localhost (::1) port 18080
* using HTTP/1.x
} [5 bytes data]
> HEAD / HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.15.0
> Accept: */*
> 
* Request completely sent off
{ [5 bytes data]
< HTTP/1.1 200 OK
< Server: openresty
< Date: Sun, 14 Sep 2025 11:26:51 GMT
< Content-Type: text/html; charset=UTF-8
< Connection: keep-alive
< Vary: Accept-Encoding
< Set-Cookie: _S=b0ajv94npnp219m8h7c45tune6; expires=Sun, 14-Sep-2025 11:36:51 GMT; Max-Age=600; path=/
< Expires: Thu, 19 Nov 1981 08:52:00 GMT
< Cache-Control: no-store, no-cache, must-revalidate
< Pragma: no-cache
< php-waf-rep: -
< Set-Cookie: QiHooGUID=758709049F32A379A7AB515C54E7E091.1757849211460; Max-Age=63072000; Domain=so.com; Path=/
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #1 to host localhost left intact
HTTP/1.1 302 Found
Connection: keep-alive
Content-Type: text/html
Date: Sun, 14 Sep 2025 11:26:51 GMT
Location: https://www.so.com/
Server: openresty
Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/

HTTP/1.1 200 Connection established

HTTP/1.1 200 OK
Server: openresty
Date: Sun, 14 Sep 2025 11:26:51 GMT
Content-Type: text/html; charset=UTF-8
Connection: keep-alive
Vary: Accept-Encoding
Set-Cookie: _S=b0ajv94npnp219m8h7c45tune6; expires=Sun, 14-Sep-2025 11:36:51 GMT; Max-Age=600; path=/
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate
Pragma: no-cache
php-waf-rep: -
Set-Cookie: QiHooGUID=758709049F32A379A7AB515C54E7E091.1757849211460; Max-Age=63072000; Domain=so.com; Path=/


```

### æµ‹è¯•3: HTTPSä»£ç†

æ‰§è¡Œå‘½ä»¤: `curl -v -I https://www.baidu.com -x http://localhost:18080`

ðŸ“‹ Curlæµ‹è¯•3è¿›ç¨‹PID: 28015

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
* Host localhost:18080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:18080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.baidu.com:443
> CONNECT www.baidu.com:443 HTTP/1.1
> Host: www.baidu.com:443
> User-Agent: curl/8.15.0
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
} [5 bytes data]
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [1566 bytes data]
*  CAfile: /data/data/com.termux/files/usr/etc/tls/cert.pem
*  CApath: /data/data/com.termux/files/usr/etc/tls/certs
{ [5 bytes data]
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [102 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [4771 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / secp256r1 / RSASSA-PSS
* ALPN: server accepted http/1.1
* Server certificate:
*  subject: C=CN; ST=beijing; L=beijing; O=Beijing Baidu Netcom Science Technology Co., Ltd; CN=baidu.com
*  start date: Jul  9 07:01:02 2025 GMT
*  expire date: Aug 10 07:01:01 2026 GMT
*  subjectAltName: host "www.baidu.com" matched cert's "*.baidu.com"
*  issuer: C=BE; O=GlobalSign nv-sa; CN=GlobalSign RSA OV SSL CA 2018
*  SSL certificate verify ok.
*   Certificate level 0: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 2: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
* Connected to localhost (::1) port 18080
* using HTTP/1.x
} [5 bytes data]
> HEAD / HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.15.0
> Accept: */*
> 
* Request completely sent off
{ [5 bytes data]
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: no-cache
< Connection: keep-alive
< Content-Length: 227
< Content-Security-Policy: frame-ancestors 'self' https://chat.baidu.com http://mirror-chat.baidu.com https://fj-chat.baidu.com https://hba-chat.baidu.com https://hbe-chat.baidu.com https://njjs-chat.baidu.com https://nj-chat.baidu.com https://hna-chat.baidu.com https://hnb-chat.baidu.com http://debug.baidu-int.com https://sai.baidu.com https://mcpstore.baidu.com https://mcpserver.baidu.com https://www.mcpworld.com https://platform-openai.now.baidu.com;
< Content-Type: text/html
< Date: Sun, 14 Sep 2025 11:26:51 GMT
< Pragma: no-cache
< Server: BWS/1.1
< Set-Cookie: BD_NOT_HTTPS=1; path=/; Max-Age=300
< Set-Cookie: PSTM=1757849211; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
< Set-Cookie: BAIDUID=0AFC72E4989669FBF7C91BCA1345861C:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000
< Set-Cookie: BAIDUID_BFESS=0AFC72E4989669FBF7C91BCA1345861C:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000; Secure; SameSite=None
< Traceid: 1757849211192526490612557163026824380060
< X-Ua-Compatible: IE=Edge,chrome=1
< X-Xss-Protection: 1;mode=block
{ [5 bytes data]
< 
  0   227    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 Connection established

HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: no-cache
Connection: keep-alive
Content-Length: 227
Content-Security-Policy: frame-ancestors 'self' https://chat.baidu.com http://mirror-chat.baidu.com https://fj-chat.baidu.com https://hba-chat.baidu.com https://hbe-chat.baidu.com https://njjs-chat.baidu.com https://nj-chat.baidu.com https://hna-chat.baidu.com https://hnb-chat.baidu.com http://debug.baidu-int.com https://sai.baidu.com https://mcpstore.baidu.com https://mcpserver.baidu.com https://www.mcpworld.com https://platform-openai.now.baidu.com;
Content-Type: text/html
Date: Sun, 14 Sep 2025 11:26:51 GMT
Pragma: no-cache
Server: BWS/1.1
Set-Cookie: BD_NOT_HTTPS=1; path=/; Max-Age=300
Set-Cookie: PSTM=1757849211; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
Set-Cookie: BAIDUID=0AFC72E4989669FBF7C91BCA1345861C:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000
Set-Cookie: BAIDUID_BFESS=0AFC72E4989669FBF7C91BCA1345861C:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000; Secure; SameSite=None
Traceid: 1757849211192526490612557163026824380060
X-Ua-Compatible: IE=Edge,chrome=1
X-Xss-Protection: 1;mode=block


```

### ðŸ“‹ æ‰€æœ‰è¿›ç¨‹PIDè®°å½•

æ‰€æœ‰è¿›ç¨‹PID: 27890, 27990, 27990, 28006, 28006, 28007, 28007, 28015, 28015

## 3. å…³é—­ä»£ç†æœåŠ¡å™¨

âœ… æ‰€æœ‰curlæµ‹è¯•æˆåŠŸï¼Œæ­£åœ¨å…³é—­ä»£ç†æœåŠ¡å™¨è¿›ç¨‹...

ðŸ›‘ æ­£åœ¨ç»ˆæ­¢ä»£ç†æœåŠ¡å™¨è¿›ç¨‹...
âœ… ä»£ç†æœåŠ¡å™¨è¿›ç¨‹å·²ç»ˆæ­¢

ðŸ§¹ æ­£åœ¨æ¸…ç†æ‰€æœ‰å­è¿›ç¨‹...

âœ… æ‰€æœ‰å­è¿›ç¨‹å·²æ¸…ç†å®Œæˆ

ðŸ§¹ å·²æ¸…ç†ç¼–è¯‘çš„å¯æ‰§è¡Œæ–‡ä»¶
### ä»£ç†æœåŠ¡å™¨æ—¥å¿—è¾“å‡º

```
2025/09/14 11:26:47 main.go:519: ä»£ç†æœåŠ¡å™¨å¯åŠ¨ä¸­...
2025/09/14 11:26:47 main.go:563: dohalpn: []
2025/09/14 11:26:47 main.go:565: hostname: 0.0.0.0
2025/09/14 11:26:47 main.go:567: port: 18080
2025/09/14 11:26:47 main.go:569: server_cert: 
2025/09/14 11:26:47 main.go:571: server_key: 
2025/09/14 11:26:47 main.go:573: username: 
2025/09/14 11:26:47 main.go:575: password: 
2025/09/14 11:26:47 main.go:577: dohurl: []
2025/09/14 11:26:47 main.go:579: dohip: []
2025/09/14 11:26:47 main.go:580: upstream-type: 
2025/09/14 11:26:47 main.go:581: upstream-address: 
2025/09/14 11:26:47 main.go:582: upstream-username: 
2025/09/14 11:26:47 main.go:583: upstream-password: 
2025/09/14 11:26:47 main.go:898: null
2025/09/14 11:26:47 simple.go:31: Proxy server started on port [::]:18080
2025/09/14 11:26:47 http.go:388: Random IP: 127.189.34.58
2025/09/14 11:26:47 http.go:406: Random integer: 38317
2025/09/14 11:26:47 http.go:358: Proxy server started on port 127.189.34.58:38317
2025/09/14 11:26:48 simple.go:57: remote addr: 127.0.0.1:37734
2025/09/14 11:26:48 simple.go:79: GET http://www.baidu.com/ HTTP/1.1
2025/09/14 11:26:48 simple.go:305: Domain: www.baidu.com, Port: 80
2025/09/14 11:26:48 simple.go:117: address:www.baidu.com:80
2025/09/14 11:26:48 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy 127.189.34.58:38317
2025/09/14 11:26:48 simple.go:234: è¿žæŽ¥æˆåŠŸï¼š127.189.34.58:38317
2025/09/14 11:26:48 simple.go:248: clienthost: 127.0.0.1
2025/09/14 11:26:48 simple.go:249: clientport: 37734
2025/09/14 11:26:48 simple.go:278: simple Handle header:
2025/09/14 11:26:48 simple.go:281: simple Handle Forwarded : for=127.0.0.1;by=127.0.0.1:18080;host=www.baidu.com:80;proto=http
2025/09/14 11:26:48 simple.go:283: GET / HTTP/1.1
2025/09/14 11:26:48 simple.go:288: Forwarded: for=127.0.0.1;by=127.0.0.1:18080;host=www.baidu.com:80;proto=http
2025/09/14 11:26:48 simple.go:294: Host: www.baidu.com
User-Agent: Go-http-client/1.1
Accept-Encoding: gzip
2025/09/14 11:26:48 http.go:90: method: GET
2025/09/14 11:26:48 http.go:91: url: /
2025/09/14 11:26:48 http.go:92: host: www.baidu.com
2025/09/14 11:26:48 http.go:93: proxyHandler header:
2025/09/14 11:26:48 http.go:120: clienthost: 127.0.0.1
2025/09/14 11:26:48 http.go:121: clientport: 58208
2025/09/14 11:26:48 http.go:132: proxyHandler Forwarded : for=127.0.0.1;by=127.0.0.1:18080;host=www.baidu.com:80;proto=http,for=127.0.0.1;by=127.189.34.58:38317;host=www.baidu.com;proto=http
2025/09/14 11:26:48 http.go:132: proxyHandler User-Agent : Go-http-client/1.1
2025/09/14 11:26:48 http.go:132: proxyHandler Accept-Encoding : gzip
2025/09/14 11:26:48 http.go:135: forwardedHeader: for=127.0.0.1;by=127.0.0.1:18080;host=www.baidu.com:80;proto=http, for=127.0.0.1;by=127.189.34.58:38317;host=www.baidu.com;proto=http
2025/09/14 11:26:48 http.go:137: forwardedByList: [{127.0.0.1:18080} {127.189.34.58:38317}]
2025/09/14 11:26:48 http.go:155: targetUrl: http://www.baidu.com/
2025/09/14 11:26:48 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.baidu.com
[GIN] 2025/09/14 - 11:26:48 | 200 |   53.909231ms |       127.0.0.1 | GET      "/"
2025/09/14 11:26:50 simple.go:57: remote addr: [::1]:57804
2025/09/14 11:26:50 simple.go:79: HEAD http://www.baidu.com/ HTTP/1.1
2025/09/14 11:26:50 simple.go:305: Domain: www.baidu.com, Port: 80
2025/09/14 11:26:50 simple.go:117: address:www.baidu.com:80
2025/09/14 11:26:50 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy 127.189.34.58:38317
2025/09/14 11:26:50 simple.go:234: è¿žæŽ¥æˆåŠŸï¼š127.189.34.58:38317
2025/09/14 11:26:50 simple.go:248: clienthost: ::1
2025/09/14 11:26:50 simple.go:249: clientport: 57804
2025/09/14 11:26:50 simple.go:278: simple Handle header:
2025/09/14 11:26:50 simple.go:281: simple Handle Forwarded : for=::1;by=[::1]:18080;host=www.baidu.com:80;proto=http
2025/09/14 11:26:50 simple.go:283: HEAD / HTTP/1.1
2025/09/14 11:26:50 simple.go:288: Forwarded: for=::1;by=[::1]:18080;host=www.baidu.com:80;proto=http
2025/09/14 11:26:50 simple.go:294: Host: www.baidu.com
User-Agent: curl/8.15.0
Accept: */*
Proxy-Connection: Keep-Alive
2025/09/14 11:26:50 http.go:90: method: HEAD
2025/09/14 11:26:50 http.go:91: url: /
2025/09/14 11:26:50 http.go:92: host: www.baidu.com
2025/09/14 11:26:50 http.go:93: proxyHandler header:
2025/09/14 11:26:50 http.go:120: clienthost: 127.0.0.1
2025/09/14 11:26:50 http.go:121: clientport: 41680
2025/09/14 11:26:50 http.go:132: proxyHandler User-Agent : curl/8.15.0
2025/09/14 11:26:50 http.go:132: proxyHandler Accept : */*
2025/09/14 11:26:50 http.go:132: proxyHandler Proxy-Connection : Keep-Alive
2025/09/14 11:26:50 http.go:132: proxyHandler Forwarded : for=::1;by=[::1]:18080;host=www.baidu.com:80;proto=http,for=127.0.0.1;by=127.189.34.58:38317;host=www.baidu.com;proto=http
2025/09/14 11:26:50 http.go:135: forwardedHeader: for=::1;by=[::1]:18080;host=www.baidu.com:80;proto=http, for=127.0.0.1;by=127.189.34.58:38317;host=www.baidu.com;proto=http
2025/09/14 11:26:50 http.go:137: forwardedByList: [{[::1]:18080} {127.189.34.58:38317}]
2025/09/14 11:26:50 http.go:155: targetUrl: http://www.baidu.com/
2025/09/14 11:26:50 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.baidu.com
[GIN] 2025/09/14 - 11:26:50 | 200 |   33.830693ms |       127.0.0.1 | HEAD     "/"
2025/09/14 11:26:50 simple.go:57: remote addr: [::1]:57810
2025/09/14 11:26:50 simple.go:79: HEAD http://www.so.com/ HTTP/1.1
2025/09/14 11:26:50 simple.go:305: Domain: www.so.com, Port: 80
2025/09/14 11:26:50 simple.go:117: address:www.so.com:80
2025/09/14 11:26:50 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy 127.189.34.58:38317
2025/09/14 11:26:50 simple.go:234: è¿žæŽ¥æˆåŠŸï¼š127.189.34.58:38317
2025/09/14 11:26:50 simple.go:248: clienthost: ::1
2025/09/14 11:26:50 simple.go:249: clientport: 57810
2025/09/14 11:26:50 simple.go:278: simple Handle header:
2025/09/14 11:26:50 simple.go:281: simple Handle Forwarded : for=::1;by=[::1]:18080;host=www.so.com:80;proto=http
2025/09/14 11:26:50 simple.go:283: HEAD / HTTP/1.1
2025/09/14 11:26:50 simple.go:288: Forwarded: for=::1;by=[::1]:18080;host=www.so.com:80;proto=http
2025/09/14 11:26:50 simple.go:294: Host: www.so.com
User-Agent: curl/8.15.0
Accept: */*
Proxy-Connection: Keep-Alive
2025/09/14 11:26:50 http.go:90: method: HEAD
2025/09/14 11:26:50 http.go:91: url: /
2025/09/14 11:26:50 http.go:92: host: www.so.com
2025/09/14 11:26:50 http.go:93: proxyHandler header:
2025/09/14 11:26:50 http.go:120: clienthost: 127.0.0.1
2025/09/14 11:26:50 http.go:121: clientport: 41694
2025/09/14 11:26:50 http.go:132: proxyHandler Forwarded : for=::1;by=[::1]:18080;host=www.so.com:80;proto=http,for=127.0.0.1;by=127.189.34.58:38317;host=www.so.com;proto=http
2025/09/14 11:26:50 http.go:132: proxyHandler User-Agent : curl/8.15.0
2025/09/14 11:26:50 http.go:132: proxyHandler Accept : */*
2025/09/14 11:26:50 http.go:132: proxyHandler Proxy-Connection : Keep-Alive
2025/09/14 11:26:50 http.go:135: forwardedHeader: for=::1;by=[::1]:18080;host=www.so.com:80;proto=http, for=127.0.0.1;by=127.189.34.58:38317;host=www.so.com;proto=http
2025/09/14 11:26:50 http.go:137: forwardedByList: [{[::1]:18080} {127.189.34.58:38317}]
2025/09/14 11:26:50 http.go:155: targetUrl: http://www.so.com/
2025/09/14 11:26:50 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.so.com
[GIN] 2025/09/14 - 11:26:51 | 302 |  250.597538ms |       127.0.0.1 | HEAD     "/"
2025/09/14 11:26:51 simple.go:57: remote addr: [::1]:57818
2025/09/14 11:26:51 simple.go:79: CONNECT www.so.com:443 HTTP/1.1
2025/09/14 11:26:51 simple.go:117: address:www.so.com:443
2025/09/14 11:26:51 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.so.com:443
2025/09/14 11:26:51 options.go:98: hostname www.so.com no ip found
2025/09/14 11:26:51 options.go:123: success connect to www.so.com:443 by tcp
2025/09/14 11:26:51 simple.go:234: è¿žæŽ¥æˆåŠŸï¼šwww.so.com:443
2025/09/14 11:26:51 simple.go:57: remote addr: [::1]:57826
2025/09/14 11:26:51 simple.go:79: CONNECT www.baidu.com:443 HTTP/1.1
2025/09/14 11:26:51 simple.go:117: address:www.baidu.com:443
2025/09/14 11:26:51 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.baidu.com:443
2025/09/14 11:26:51 options.go:98: hostname www.baidu.com no ip found
2025/09/14 11:26:51 options.go:123: success connect to www.baidu.com:443 by tcp
2025/09/14 11:26:51 simple.go:234: è¿žæŽ¥æˆåŠŸï¼šwww.baidu.com:443
```

### æ‰€æœ‰å­è¿›ç¨‹æ—¥å¿—è¾“å‡º

```
### Curlæµ‹è¯•1è¾“å‡º ###
* Host localhost:18080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:18080...
* Connected to localhost (::1) port 18080
* using HTTP/1.x
> HEAD http://www.baidu.com/ HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.15.0
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Bdpagetype: 1
< Bdqid: 0xc310dc9c00822c0b
< Connection: keep-alive
< Content-Length: 654884
< Content-Type: text/html; charset=utf-8
< Date: Sun, 14 Sep 2025 11:26:50 GMT
< Server: BWS/1.1
< Set-Cookie: BIDUPSID=ECC01D5BEA976C123C45B959B8CA202A; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
< Set-Cookie: PSTM=1757849210; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
< Set-Cookie: BDSVRTM=0; path=/
< Set-Cookie: BD_HOME=1; path=/
< Set-Cookie: BAIDUID=ECC01D5BEA976C123C45B959B8CA202A:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000
< Set-Cookie: BAIDUID_BFESS=ECC01D5BEA976C123C45B959B8CA202A:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000; Secure; SameSite=None
< Tr_id: super_0xc310dc9c00822c0b
< Traceid: 1757849210046571265014055976999604857867
< Vary: Accept-Encoding
< X-Ua-Compatible: IE=Edge,chrome=1
< X-Xss-Protection: 1;mode=block
< 
  0  639k    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 OK
Bdpagetype: 1
Bdqid: 0xc310dc9c00822c0b
Connection: keep-alive
Content-Length: 654884
Content-Type: text/html; charset=utf-8
Date: Sun, 14 Sep 2025 11:26:50 GMT
Server: BWS/1.1
Set-Cookie: BIDUPSID=ECC01D5BEA976C123C45B959B8CA202A; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
Set-Cookie: PSTM=1757849210; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
Set-Cookie: BDSVRTM=0; path=/
Set-Cookie: BD_HOME=1; path=/
Set-Cookie: BAIDUID=ECC01D5BEA976C123C45B959B8CA202A:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000
Set-Cookie: BAIDUID_BFESS=ECC01D5BEA976C123C45B959B8CA202A:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000; Secure; SameSite=None
Tr_id: super_0xc310dc9c00822c0b
Traceid: 1757849210046571265014055976999604857867
Vary: Accept-Encoding
X-Ua-Compatible: IE=Edge,chrome=1
X-Xss-Protection: 1;mode=block
### Curlæµ‹è¯•2è¾“å‡º ###
* Host localhost:18080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:18080...
* Connected to localhost (::1) port 18080
* using HTTP/1.x
> HEAD http://www.so.com/ HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.15.0
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 302 Found
< Connection: keep-alive
< Content-Type: text/html
< Date: Sun, 14 Sep 2025 11:26:51 GMT
< Location: https://www.so.com/
< Server: openresty
< Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/
* Ignoring the response-body
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
* Clear auth, redirects to port from 80 to 443
* Issue another request to this URL: 'https://www.so.com/'
* Hostname localhost was found in DNS cache
*   Trying [::1]:18080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.so.com:443
> CONNECT www.so.com:443 HTTP/1.1
> Host: www.so.com:443
> User-Agent: curl/8.15.0
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
} [5 bytes data]
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [1563 bytes data]
*  CAfile: /data/data/com.termux/files/usr/etc/tls/cert.pem
*  CApath: /data/data/com.termux/files/usr/etc/tls/certs
{ [5 bytes data]
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [93 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [5077 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / secp256r1 / rsaEncryption
* ALPN: server did not agree on a protocol. Uses default.
* Server certificate:
*  subject: CN=*.so.com
*  start date: Aug 28 00:00:00 2025 GMT
*  expire date: Sep 28 23:59:59 2026 GMT
*  subjectAltName: host "www.so.com" matched cert's "*.so.com"
*  issuer: C=CN; O=WoTrus CA Limited; CN=WoTrus DV Server CA  [Run by the Issuer]
*  SSL certificate verify ok.
*   Certificate level 0: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type RSA (2048/112 Bits/secBits), signed using sha384WithRSAEncryption
*   Certificate level 2: Public key type RSA (4096/152 Bits/secBits), signed using sha384WithRSAEncryption
* Connected to localhost (::1) port 18080
* using HTTP/1.x
} [5 bytes data]
> HEAD / HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.15.0
> Accept: */*
> 
* Request completely sent off
{ [5 bytes data]
< HTTP/1.1 200 OK
< Server: openresty
< Date: Sun, 14 Sep 2025 11:26:51 GMT
< Content-Type: text/html; charset=UTF-8
< Connection: keep-alive
< Vary: Accept-Encoding
< Set-Cookie: _S=b0ajv94npnp219m8h7c45tune6; expires=Sun, 14-Sep-2025 11:36:51 GMT; Max-Age=600; path=/
< Expires: Thu, 19 Nov 1981 08:52:00 GMT
< Cache-Control: no-store, no-cache, must-revalidate
< Pragma: no-cache
< php-waf-rep: -
< Set-Cookie: QiHooGUID=758709049F32A379A7AB515C54E7E091.1757849211460; Max-Age=63072000; Domain=so.com; Path=/
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #1 to host localhost left intact
HTTP/1.1 302 Found
Connection: keep-alive
Content-Type: text/html
Date: Sun, 14 Sep 2025 11:26:51 GMT
Location: https://www.so.com/
Server: openresty
Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/
HTTP/1.1 200 Connection established
HTTP/1.1 200 OK
Server: openresty
Date: Sun, 14 Sep 2025 11:26:51 GMT
Content-Type: text/html; charset=UTF-8
Connection: keep-alive
Vary: Accept-Encoding
Set-Cookie: _S=b0ajv94npnp219m8h7c45tune6; expires=Sun, 14-Sep-2025 11:36:51 GMT; Max-Age=600; path=/
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate
Pragma: no-cache
php-waf-rep: -
Set-Cookie: QiHooGUID=758709049F32A379A7AB515C54E7E091.1757849211460; Max-Age=63072000; Domain=so.com; Path=/
### Curlæµ‹è¯•3è¾“å‡º ###
* Host localhost:18080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:18080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.baidu.com:443
> CONNECT www.baidu.com:443 HTTP/1.1
> Host: www.baidu.com:443
> User-Agent: curl/8.15.0
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
} [5 bytes data]
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [1566 bytes data]
*  CAfile: /data/data/com.termux/files/usr/etc/tls/cert.pem
*  CApath: /data/data/com.termux/files/usr/etc/tls/certs
{ [5 bytes data]
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [102 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [4771 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / secp256r1 / RSASSA-PSS
* ALPN: server accepted http/1.1
* Server certificate:
*  subject: C=CN; ST=beijing; L=beijing; O=Beijing Baidu Netcom Science Technology Co., Ltd; CN=baidu.com
*  start date: Jul  9 07:01:02 2025 GMT
*  expire date: Aug 10 07:01:01 2026 GMT
*  subjectAltName: host "www.baidu.com" matched cert's "*.baidu.com"
*  issuer: C=BE; O=GlobalSign nv-sa; CN=GlobalSign RSA OV SSL CA 2018
*  SSL certificate verify ok.
*   Certificate level 0: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 2: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
* Connected to localhost (::1) port 18080
* using HTTP/1.x
} [5 bytes data]
> HEAD / HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.15.0
> Accept: */*
> 
* Request completely sent off
{ [5 bytes data]
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: no-cache
< Connection: keep-alive
< Content-Length: 227
< Content-Security-Policy: frame-ancestors 'self' https://chat.baidu.com http://mirror-chat.baidu.com https://fj-chat.baidu.com https://hba-chat.baidu.com https://hbe-chat.baidu.com https://njjs-chat.baidu.com https://nj-chat.baidu.com https://hna-chat.baidu.com https://hnb-chat.baidu.com http://debug.baidu-int.com https://sai.baidu.com https://mcpstore.baidu.com https://mcpserver.baidu.com https://www.mcpworld.com https://platform-openai.now.baidu.com;
< Content-Type: text/html
< Date: Sun, 14 Sep 2025 11:26:51 GMT
< Pragma: no-cache
< Server: BWS/1.1
< Set-Cookie: BD_NOT_HTTPS=1; path=/; Max-Age=300
< Set-Cookie: PSTM=1757849211; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
< Set-Cookie: BAIDUID=0AFC72E4989669FBF7C91BCA1345861C:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000
< Set-Cookie: BAIDUID_BFESS=0AFC72E4989669FBF7C91BCA1345861C:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000; Secure; SameSite=None
< Traceid: 1757849211192526490612557163026824380060
< X-Ua-Compatible: IE=Edge,chrome=1
< X-Xss-Protection: 1;mode=block
{ [5 bytes data]
< 
  0   227    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 Connection established
HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: no-cache
Connection: keep-alive
Content-Length: 227
Content-Security-Policy: frame-ancestors 'self' https://chat.baidu.com http://mirror-chat.baidu.com https://fj-chat.baidu.com https://hba-chat.baidu.com https://hbe-chat.baidu.com https://njjs-chat.baidu.com https://nj-chat.baidu.com https://hna-chat.baidu.com https://hnb-chat.baidu.com http://debug.baidu-int.com https://sai.baidu.com https://mcpstore.baidu.com https://mcpserver.baidu.com https://www.mcpworld.com https://platform-openai.now.baidu.com;
Content-Type: text/html
Date: Sun, 14 Sep 2025 11:26:51 GMT
Pragma: no-cache
Server: BWS/1.1
Set-Cookie: BD_NOT_HTTPS=1; path=/; Max-Age=300
Set-Cookie: PSTM=1757849211; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com
Set-Cookie: BAIDUID=0AFC72E4989669FBF7C91BCA1345861C:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000
Set-Cookie: BAIDUID_BFESS=0AFC72E4989669FBF7C91BCA1345861C:FG=1; Path=/; Domain=baidu.com; Max-Age=31536000; Secure; SameSite=None
Traceid: 1757849211192526490612557163026824380060
X-Ua-Compatible: IE=Edge,chrome=1
X-Xss-Protection: 1;mode=block
```

âœ… ç«¯å£18080å·²æˆåŠŸé‡Šæ”¾
