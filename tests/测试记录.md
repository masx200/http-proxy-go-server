

###

# HTTPä»£ç†æœåŠ¡å™¨æµ‹è¯•è®°å½•

## æµ‹è¯•æ—¶é—´
2025-09-12 00:15:22

## 1. å¯åŠ¨ä»£ç†æœåŠ¡å™¨

æ‰§è¡Œå‘½ä»¤: `go run -v ../cmd/main.go`

ç¼–è¯‘ä»£ç†æœåŠ¡å™¨...
âœ… ä»£ç†æœåŠ¡å™¨ç¼–è¯‘æˆåŠŸ

ðŸ“‹ ä»£ç†æœåŠ¡å™¨è¿›ç¨‹PID: 17064

ç­‰å¾…æœåŠ¡å™¨å¯åŠ¨...
âœ… ä»£ç†æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ

## 2. æµ‹è¯•HTTPä»£ç†åŠŸèƒ½

### æµ‹è¯•1: åŸºæœ¬HTTPä»£ç†

æ‰§è¡Œå‘½ä»¤: `curl -v -I http://www.baidu.com -x http://localhost:8080`

ðŸ“‹ Curlæµ‹è¯•1è¿›ç¨‹PID: 51088

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD http://www.baidu.com/ HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.12.1
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
< Connection: keep-alive
< Content-Length: 277
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:15:14 GMT
< Etag: "575e1f60-115"
< Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
< Pragma: no-cache
< Server: bfe/1.0.8.18
< Tr_id: bfe_8450435893000235393
< 
  0   277    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
Connection: keep-alive
Content-Length: 277
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:15:14 GMT
Etag: "575e1f60-115"
Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
Pragma: no-cache
Server: bfe/1.0.8.18
Tr_id: bfe_8450435893000235393


```

### æµ‹è¯•2: HTTPä»£ç†www.so.com

æ‰§è¡Œå‘½ä»¤: `curl -v -I http://www.so.com -x http://localhost:8080 -L`

ðŸ“‹ Curlæµ‹è¯•2è¿›ç¨‹PID: 45832

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD http://www.so.com/ HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.12.1
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 302 Found
< Connection: keep-alive
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:15:14 GMT
< Location: https://www.so.com/
< Server: openresty
< Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/
* Ignoring the response-body
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
* Clear auth, redirects to port from 80 to 443
* Issue another request to this URL: 'https://www.so.com/'
* Hostname localhost was found in DNS cache
*   Trying [::1]:8080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.so.com:443
> CONNECT www.so.com:443 HTTP/1.1
> Host: www.so.com:443
> User-Agent: curl/8.12.1
> Proxy-Connection: Keep-Alive
> 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [305 bytes data]
*  CAfile: D:\è¿…é›·ä¸‹è½½\curl-8.12.1_4-win64-mingw\bin\curl-ca-bundle.crt
*  CApath: none
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [93 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [5077 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS change cipher, Change cipher spec (1):
{ [1 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / [blank] / UNDEF
* ALPN: server did not agree on a protocol. Uses default.
* Server certificate:
*  subject: CN=*.so.com
*  start date: Aug 28 00:00:00 2025 GMT
*  expire date: Sep 28 23:59:59 2026 GMT
*  subjectAltName: host "www.so.com" matched cert's "*.so.com"
*  issuer: C=CN; O=WoTrus CA Limited; CN=WoTrus DV Server CA  [Run by the Issuer]
*  SSL certificate verify ok.
*   Certificate level 0: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type ? (2048/112 Bits/secBits), signed using sha384WithRSAEncryption
*   Certificate level 2: Public key type ? (4096/128 Bits/secBits), signed using sha384WithRSAEncryption
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD / HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.12.1
> Accept: */*
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Server: openresty
< Date: Thu, 11 Sep 2025 16:15:14 GMT
< Content-Type: text/html; charset=UTF-8
< Connection: keep-alive
< Vary: Accept-Encoding
< Set-Cookie: _S=8h6j94t4plft8e0ohj166jtra7; expires=Thu, 11-Sep-2025 16:25:14 GMT; Max-Age=600; path=/
< Expires: Thu, 19 Nov 1981 08:52:00 GMT
< Cache-Control: no-store, no-cache, must-revalidate
< Pragma: no-cache
< php-waf-rep: -
< Set-Cookie: QiHooGUID=A197D95FCBD0E72D10AF11E4851D18EE.1757607314878; Max-Age=63072000; Domain=so.com; Path=/
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #1 to host localhost left intact
HTTP/1.1 302 Found
Connection: keep-alive
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:15:14 GMT
Location: https://www.so.com/
Server: openresty
Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/

HTTP/1.1 200 Connection established

HTTP/1.1 200 OK
Server: openresty
Date: Thu, 11 Sep 2025 16:15:14 GMT
Content-Type: text/html; charset=UTF-8
Connection: keep-alive
Vary: Accept-Encoding
Set-Cookie: _S=8h6j94t4plft8e0ohj166jtra7; expires=Thu, 11-Sep-2025 16:25:14 GMT; Max-Age=600; path=/
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate
Pragma: no-cache
php-waf-rep: -
Set-Cookie: QiHooGUID=A197D95FCBD0E72D10AF11E4851D18EE.1757607314878; Max-Age=63072000; Domain=so.com; Path=/


```

### æµ‹è¯•3: HTTPSä»£ç†

æ‰§è¡Œå‘½ä»¤: `curl -v -I https://www.baidu.com -x http://localhost:8080`

ðŸ“‹ Curlæµ‹è¯•3è¿›ç¨‹PID: 5884

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.baidu.com:443
> CONNECT www.baidu.com:443 HTTP/1.1
> Host: www.baidu.com:443
> User-Agent: curl/8.12.1
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [308 bytes data]
*  CAfile: D:\è¿…é›·ä¸‹è½½\curl-8.12.1_4-win64-mingw\bin\curl-ca-bundle.crt
*  CApath: none
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [102 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [4771 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS change cipher, Change cipher spec (1):
{ [1 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / [blank] / UNDEF
* ALPN: server accepted http/1.1
* Server certificate:
*  subject: C=CN; ST=beijing; L=beijing; O=Beijing Baidu Netcom Science Technology Co., Ltd; CN=baidu.com
*  start date: Jul  9 07:01:02 2025 GMT
*  expire date: Aug 10 07:01:01 2026 GMT
*  subjectAltName: host "www.baidu.com" matched cert's "*.baidu.com"
*  issuer: C=BE; O=GlobalSign nv-sa; CN=GlobalSign RSA OV SSL CA 2018
*  SSL certificate verify ok.
*   Certificate level 0: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 2: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD / HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.12.1
> Accept: */*
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
< Connection: keep-alive
< Content-Length: 277
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:15:14 GMT
< Etag: "575e1f60-115"
< Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
< Pragma: no-cache
< Server: bfe/1.0.8.18
< Tr_id: bfe_9664648716012827669
< 
  0   277    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 Connection established

HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
Connection: keep-alive
Content-Length: 277
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:15:14 GMT
Etag: "575e1f60-115"
Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
Pragma: no-cache
Server: bfe/1.0.8.18
Tr_id: bfe_9664648716012827669


```

### ðŸ“‹ æ‰€æœ‰è¿›ç¨‹PIDè®°å½•

æ‰€æœ‰è¿›ç¨‹PID: 17064, 51088, 45832, 5884



###

# HTTPä»£ç†æœåŠ¡å™¨æµ‹è¯•è®°å½•

## æµ‹è¯•æ—¶é—´
2025-09-12 00:15:22

## 1. å¯åŠ¨ä»£ç†æœåŠ¡å™¨

æ‰§è¡Œå‘½ä»¤: `go run -v ../cmd/main.go`

ç¼–è¯‘ä»£ç†æœåŠ¡å™¨...
âœ… ä»£ç†æœåŠ¡å™¨ç¼–è¯‘æˆåŠŸ

ðŸ“‹ ä»£ç†æœåŠ¡å™¨è¿›ç¨‹PID: 17064

ç­‰å¾…æœåŠ¡å™¨å¯åŠ¨...
âœ… ä»£ç†æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ

## 2. æµ‹è¯•HTTPä»£ç†åŠŸèƒ½

### æµ‹è¯•1: åŸºæœ¬HTTPä»£ç†

æ‰§è¡Œå‘½ä»¤: `curl -v -I http://www.baidu.com -x http://localhost:8080`

ðŸ“‹ Curlæµ‹è¯•1è¿›ç¨‹PID: 51088

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD http://www.baidu.com/ HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.12.1
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
< Connection: keep-alive
< Content-Length: 277
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:15:14 GMT
< Etag: "575e1f60-115"
< Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
< Pragma: no-cache
< Server: bfe/1.0.8.18
< Tr_id: bfe_8450435893000235393
< 
  0   277    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
Connection: keep-alive
Content-Length: 277
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:15:14 GMT
Etag: "575e1f60-115"
Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
Pragma: no-cache
Server: bfe/1.0.8.18
Tr_id: bfe_8450435893000235393


```

### æµ‹è¯•2: HTTPä»£ç†www.so.com

æ‰§è¡Œå‘½ä»¤: `curl -v -I http://www.so.com -x http://localhost:8080 -L`

ðŸ“‹ Curlæµ‹è¯•2è¿›ç¨‹PID: 45832

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD http://www.so.com/ HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.12.1
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 302 Found
< Connection: keep-alive
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:15:14 GMT
< Location: https://www.so.com/
< Server: openresty
< Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/
* Ignoring the response-body
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
* Clear auth, redirects to port from 80 to 443
* Issue another request to this URL: 'https://www.so.com/'
* Hostname localhost was found in DNS cache
*   Trying [::1]:8080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.so.com:443
> CONNECT www.so.com:443 HTTP/1.1
> Host: www.so.com:443
> User-Agent: curl/8.12.1
> Proxy-Connection: Keep-Alive
> 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [305 bytes data]
*  CAfile: D:\è¿…é›·ä¸‹è½½\curl-8.12.1_4-win64-mingw\bin\curl-ca-bundle.crt
*  CApath: none
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [93 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [5077 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS change cipher, Change cipher spec (1):
{ [1 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / [blank] / UNDEF
* ALPN: server did not agree on a protocol. Uses default.
* Server certificate:
*  subject: CN=*.so.com
*  start date: Aug 28 00:00:00 2025 GMT
*  expire date: Sep 28 23:59:59 2026 GMT
*  subjectAltName: host "www.so.com" matched cert's "*.so.com"
*  issuer: C=CN; O=WoTrus CA Limited; CN=WoTrus DV Server CA  [Run by the Issuer]
*  SSL certificate verify ok.
*   Certificate level 0: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type ? (2048/112 Bits/secBits), signed using sha384WithRSAEncryption
*   Certificate level 2: Public key type ? (4096/128 Bits/secBits), signed using sha384WithRSAEncryption
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD / HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.12.1
> Accept: */*
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Server: openresty
< Date: Thu, 11 Sep 2025 16:15:14 GMT
< Content-Type: text/html; charset=UTF-8
< Connection: keep-alive
< Vary: Accept-Encoding
< Set-Cookie: _S=8h6j94t4plft8e0ohj166jtra7; expires=Thu, 11-Sep-2025 16:25:14 GMT; Max-Age=600; path=/
< Expires: Thu, 19 Nov 1981 08:52:00 GMT
< Cache-Control: no-store, no-cache, must-revalidate
< Pragma: no-cache
< php-waf-rep: -
< Set-Cookie: QiHooGUID=A197D95FCBD0E72D10AF11E4851D18EE.1757607314878; Max-Age=63072000; Domain=so.com; Path=/
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #1 to host localhost left intact
HTTP/1.1 302 Found
Connection: keep-alive
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:15:14 GMT
Location: https://www.so.com/
Server: openresty
Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/

HTTP/1.1 200 Connection established

HTTP/1.1 200 OK
Server: openresty
Date: Thu, 11 Sep 2025 16:15:14 GMT
Content-Type: text/html; charset=UTF-8
Connection: keep-alive
Vary: Accept-Encoding
Set-Cookie: _S=8h6j94t4plft8e0ohj166jtra7; expires=Thu, 11-Sep-2025 16:25:14 GMT; Max-Age=600; path=/
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate
Pragma: no-cache
php-waf-rep: -
Set-Cookie: QiHooGUID=A197D95FCBD0E72D10AF11E4851D18EE.1757607314878; Max-Age=63072000; Domain=so.com; Path=/


```

### æµ‹è¯•3: HTTPSä»£ç†

æ‰§è¡Œå‘½ä»¤: `curl -v -I https://www.baidu.com -x http://localhost:8080`

ðŸ“‹ Curlæµ‹è¯•3è¿›ç¨‹PID: 5884

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.baidu.com:443
> CONNECT www.baidu.com:443 HTTP/1.1
> Host: www.baidu.com:443
> User-Agent: curl/8.12.1
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [308 bytes data]
*  CAfile: D:\è¿…é›·ä¸‹è½½\curl-8.12.1_4-win64-mingw\bin\curl-ca-bundle.crt
*  CApath: none
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [102 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [4771 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS change cipher, Change cipher spec (1):
{ [1 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / [blank] / UNDEF
* ALPN: server accepted http/1.1
* Server certificate:
*  subject: C=CN; ST=beijing; L=beijing; O=Beijing Baidu Netcom Science Technology Co., Ltd; CN=baidu.com
*  start date: Jul  9 07:01:02 2025 GMT
*  expire date: Aug 10 07:01:01 2026 GMT
*  subjectAltName: host "www.baidu.com" matched cert's "*.baidu.com"
*  issuer: C=BE; O=GlobalSign nv-sa; CN=GlobalSign RSA OV SSL CA 2018
*  SSL certificate verify ok.
*   Certificate level 0: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 2: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD / HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.12.1
> Accept: */*
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
< Connection: keep-alive
< Content-Length: 277
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:15:14 GMT
< Etag: "575e1f60-115"
< Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
< Pragma: no-cache
< Server: bfe/1.0.8.18
< Tr_id: bfe_9664648716012827669
< 
  0   277    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 Connection established

HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
Connection: keep-alive
Content-Length: 277
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:15:14 GMT
Etag: "575e1f60-115"
Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
Pragma: no-cache
Server: bfe/1.0.8.18
Tr_id: bfe_9664648716012827669


```

### ðŸ“‹ æ‰€æœ‰è¿›ç¨‹PIDè®°å½•

æ‰€æœ‰è¿›ç¨‹PID: 17064, 51088, 45832, 5884

## 3. å…³é—­ä»£ç†æœåŠ¡å™¨

âœ… æ‰€æœ‰curlæµ‹è¯•æˆåŠŸï¼Œæ­£åœ¨å…³é—­ä»£ç†æœåŠ¡å™¨è¿›ç¨‹...

ðŸ›‘ æ­£åœ¨ç»ˆæ­¢ä»£ç†æœåŠ¡å™¨è¿›ç¨‹...
âœ… ä»£ç†æœåŠ¡å™¨è¿›ç¨‹å·²ç»ˆæ­¢

ðŸ§¹ æ­£åœ¨æ¸…ç†æ‰€æœ‰å­è¿›ç¨‹...

âœ… æ‰€æœ‰å­è¿›ç¨‹å·²æ¸…ç†å®Œæˆ

ðŸ§¹ å·²æ¸…ç†ç¼–è¯‘çš„å¯æ‰§è¡Œæ–‡ä»¶
### ä»£ç†æœåŠ¡å™¨æ—¥å¿—è¾“å‡º

```
2025/09/12 00:15:23 main.go:518: ä»£ç†æœåŠ¡å™¨å¯åŠ¨ä¸­...
2025/09/12 00:15:23 main.go:562: dohalpn: []
2025/09/12 00:15:23 main.go:564: hostname: 0.0.0.0
2025/09/12 00:15:23 main.go:566: port: 8080
2025/09/12 00:15:23 main.go:568: server_cert: 
2025/09/12 00:15:23 main.go:570: server_key: 
2025/09/12 00:15:23 main.go:572: username: 
2025/09/12 00:15:23 main.go:574: password: 
2025/09/12 00:15:23 main.go:576: dohurl: []
2025/09/12 00:15:23 main.go:578: dohip: []
2025/09/12 00:15:23 main.go:579: upstream-type: 
2025/09/12 00:15:23 main.go:580: upstream-address: 
2025/09/12 00:15:23 main.go:581: upstream-username: 
2025/09/12 00:15:23 main.go:582: upstream-password: 
2025/09/12 00:15:23 main.go:854: null
2025/09/12 00:15:23 simple.go:31: Proxy server started on port [::]:8080
2025/09/12 00:15:23 http.go:372: Random IP: 127.99.71.109
2025/09/12 00:15:23 http.go:390: Random integer: 51443
2025/09/12 00:15:23 http.go:342: Proxy server started on port 127.99.71.109:51443
2025/09/12 00:15:24 simple.go:57: remote addr: [::1]:4636
2025/09/12 00:15:24 simple.go:72: GET http://www.baidu.com/ HTTP/1.1
2025/09/12 00:15:24 simple.go:298: Domain: www.baidu.com, Port: 80
2025/09/12 00:15:24 simple.go:110: address:www.baidu.com:80
2025/09/12 00:15:24 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy 127.99.71.109:51443
2025/09/12 00:15:24 simple.go:227: è¿žæŽ¥æˆåŠŸï¼š127.99.71.109:51443
2025/09/12 00:15:24 simple.go:241: clienthost: ::1
2025/09/12 00:15:24 simple.go:242: clientport: 4636
2025/09/12 00:15:24 simple.go:271: simple Handle header:
2025/09/12 00:15:24 simple.go:274: simple Handle Forwarded : for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http
2025/09/12 00:15:24 simple.go:276: GET / HTTP/1.1
2025/09/12 00:15:24 simple.go:281: Forwarded: for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http
2025/09/12 00:15:24 simple.go:287: Host: www.baidu.com
User-Agent: Go-http-client/1.1
Accept-Encoding: gzip
2025/09/12 00:15:24 http.go:90: method: GET
2025/09/12 00:15:24 http.go:91: url: /
2025/09/12 00:15:24 http.go:92: host: www.baidu.com
2025/09/12 00:15:24 http.go:93: proxyHandler header:
2025/09/12 00:15:24 http.go:120: clienthost: 127.0.0.1
2025/09/12 00:15:24 http.go:121: clientport: 4637
2025/09/12 00:15:24 http.go:132: proxyHandler User-Agent : Go-http-client/1.1
2025/09/12 00:15:24 http.go:132: proxyHandler Accept-Encoding : gzip
2025/09/12 00:15:24 http.go:132: proxyHandler Forwarded : for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http,for=127.0.0.1;by=127.99.71.109:51443;host=www.baidu.com;proto=http
2025/09/12 00:15:24 http.go:135: forwardedHeader: for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http, for=127.0.0.1;by=127.99.71.109:51443;host=www.baidu.com;proto=http
2025/09/12 00:15:24 http.go:137: forwardedByList: [{[::1]:8080} {127.99.71.109:51443}]
2025/09/12 00:15:24 http.go:155: targetUrl: http://www.baidu.com/
2025/09/12 00:15:24 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.baidu.com
[GIN] 2025/09/12 - 00:15:24 | 200 |     51.0036ms |       127.0.0.1 | GET      "/"
2025/09/12 00:15:26 simple.go:57: remote addr: [::1]:4722
2025/09/12 00:15:26 simple.go:72: HEAD http://www.baidu.com/ HTTP/1.1
2025/09/12 00:15:26 simple.go:298: Domain: www.baidu.com, Port: 80
2025/09/12 00:15:26 simple.go:110: address:www.baidu.com:80
2025/09/12 00:15:26 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy 127.99.71.109:51443
2025/09/12 00:15:26 simple.go:227: è¿žæŽ¥æˆåŠŸï¼š127.99.71.109:51443
2025/09/12 00:15:26 simple.go:241: clienthost: ::1
2025/09/12 00:15:26 simple.go:242: clientport: 4722
2025/09/12 00:15:26 simple.go:271: simple Handle header:
2025/09/12 00:15:26 simple.go:274: simple Handle Forwarded : for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http
2025/09/12 00:15:26 simple.go:276: HEAD / HTTP/1.1
2025/09/12 00:15:26 simple.go:281: Forwarded: for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http
2025/09/12 00:15:26 simple.go:287: Host: www.baidu.com
User-Agent: curl/8.12.1
Accept: */*
Proxy-Connection: Keep-Alive
2025/09/12 00:15:26 http.go:90: method: HEAD
2025/09/12 00:15:26 http.go:91: url: /
2025/09/12 00:15:26 http.go:92: host: www.baidu.com
2025/09/12 00:15:26 http.go:93: proxyHandler header:
2025/09/12 00:15:26 http.go:120: clienthost: 127.0.0.1
2025/09/12 00:15:26 http.go:121: clientport: 4723
2025/09/12 00:15:26 http.go:132: proxyHandler Accept : */*
2025/09/12 00:15:26 http.go:132: proxyHandler Proxy-Connection : Keep-Alive
2025/09/12 00:15:26 http.go:132: proxyHandler Forwarded : for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http,for=127.0.0.1;by=127.99.71.109:51443;host=www.baidu.com;proto=http
2025/09/12 00:15:26 http.go:132: proxyHandler User-Agent : curl/8.12.1
2025/09/12 00:15:26 http.go:135: forwardedHeader: for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http, for=127.0.0.1;by=127.99.71.109:51443;host=www.baidu.com;proto=http
2025/09/12 00:15:26 http.go:137: forwardedByList: [{[::1]:8080} {127.99.71.109:51443}]
2025/09/12 00:15:26 http.go:155: targetUrl: http://www.baidu.com/
2025/09/12 00:15:26 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.baidu.com
[GIN] 2025/09/12 - 00:15:26 | 200 |     13.0389ms |       127.0.0.1 | HEAD     "/"
2025/09/12 00:15:26 simple.go:57: remote addr: [::1]:4725
2025/09/12 00:15:26 simple.go:72: HEAD http://www.so.com/ HTTP/1.1
2025/09/12 00:15:26 simple.go:298: Domain: www.so.com, Port: 80
2025/09/12 00:15:26 simple.go:110: address:www.so.com:80
2025/09/12 00:15:26 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy 127.99.71.109:51443
2025/09/12 00:15:26 simple.go:227: è¿žæŽ¥æˆåŠŸï¼š127.99.71.109:51443
2025/09/12 00:15:26 simple.go:241: clienthost: ::1
2025/09/12 00:15:26 simple.go:242: clientport: 4725
2025/09/12 00:15:26 simple.go:271: simple Handle header:
2025/09/12 00:15:26 simple.go:274: simple Handle Forwarded : for=::1;by=[::1]:8080;host=www.so.com:80;proto=http
2025/09/12 00:15:26 simple.go:276: HEAD / HTTP/1.1
2025/09/12 00:15:26 simple.go:281: Forwarded: for=::1;by=[::1]:8080;host=www.so.com:80;proto=http
2025/09/12 00:15:26 simple.go:287: Host: www.so.com
User-Agent: curl/8.12.1
Accept: */*
Proxy-Connection: Keep-Alive
2025/09/12 00:15:26 http.go:90: method: HEAD
2025/09/12 00:15:26 http.go:91: url: /
2025/09/12 00:15:26 http.go:92: host: www.so.com
2025/09/12 00:15:26 http.go:93: proxyHandler header:
2025/09/12 00:15:26 http.go:120: clienthost: 127.0.0.1
2025/09/12 00:15:26 http.go:121: clientport: 4726
2025/09/12 00:15:26 http.go:132: proxyHandler Forwarded : for=::1;by=[::1]:8080;host=www.so.com:80;proto=http,for=127.0.0.1;by=127.99.71.109:51443;host=www.so.com;proto=http
2025/09/12 00:15:26 http.go:132: proxyHandler User-Agent : curl/8.12.1
2025/09/12 00:15:26 http.go:132: proxyHandler Accept : */*
2025/09/12 00:15:26 http.go:132: proxyHandler Proxy-Connection : Keep-Alive
2025/09/12 00:15:26 http.go:135: forwardedHeader: for=::1;by=[::1]:8080;host=www.so.com:80;proto=http, for=127.0.0.1;by=127.99.71.109:51443;host=www.so.com;proto=http
2025/09/12 00:15:26 http.go:137: forwardedByList: [{[::1]:8080} {127.99.71.109:51443}]
2025/09/12 00:15:26 http.go:155: targetUrl: http://www.so.com/
2025/09/12 00:15:26 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.so.com
[GIN] 2025/09/12 - 00:15:26 | 302 |    113.4267ms |       127.0.0.1 | HEAD     "/"
2025/09/12 00:15:26 simple.go:57: remote addr: [::1]:4734
2025/09/12 00:15:26 simple.go:72: CONNECT www.so.com:443 HTTP/1.1
2025/09/12 00:15:26 simple.go:110: address:www.so.com:443
2025/09/12 00:15:26 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.so.com:443
2025/09/12 00:15:26 options.go:98: hostname www.so.com no ip found
2025/09/12 00:15:26 options.go:123: success connect to www.so.com:443 by tcp
2025/09/12 00:15:26 simple.go:227: è¿žæŽ¥æˆåŠŸï¼šwww.so.com:443
2025/09/12 00:15:26 simple.go:57: remote addr: [::1]:4754
2025/09/12 00:15:26 simple.go:72: CONNECT www.baidu.com:443 HTTP/1.1
2025/09/12 00:15:26 simple.go:110: address:www.baidu.com:443
2025/09/12 00:15:26 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.baidu.com:443
2025/09/12 00:15:26 options.go:98: hostname www.baidu.com no ip found
2025/09/12 00:15:26 options.go:123: success connect to www.baidu.com:443 by tcp
2025/09/12 00:15:26 simple.go:227: è¿žæŽ¥æˆåŠŸï¼šwww.baidu.com:443
```

### æ‰€æœ‰å­è¿›ç¨‹æ—¥å¿—è¾“å‡º

```
### Curlæµ‹è¯•1è¾“å‡º ###
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD http://www.baidu.com/ HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.12.1
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
< Connection: keep-alive
< Content-Length: 277
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:15:14 GMT
< Etag: "575e1f60-115"
< Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
< Pragma: no-cache
< Server: bfe/1.0.8.18
< Tr_id: bfe_8450435893000235393
< 
  0   277    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
Connection: keep-alive
Content-Length: 277
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:15:14 GMT
Etag: "575e1f60-115"
Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
Pragma: no-cache
Server: bfe/1.0.8.18
Tr_id: bfe_8450435893000235393
### Curlæµ‹è¯•2è¾“å‡º ###
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD http://www.so.com/ HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.12.1
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 302 Found
< Connection: keep-alive
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:15:14 GMT
< Location: https://www.so.com/
< Server: openresty
< Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/
* Ignoring the response-body
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
* Clear auth, redirects to port from 80 to 443
* Issue another request to this URL: 'https://www.so.com/'
* Hostname localhost was found in DNS cache
*   Trying [::1]:8080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.so.com:443
> CONNECT www.so.com:443 HTTP/1.1
> Host: www.so.com:443
> User-Agent: curl/8.12.1
> Proxy-Connection: Keep-Alive
> 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [305 bytes data]
*  CAfile: D:\è¿…é›·ä¸‹è½½\curl-8.12.1_4-win64-mingw\bin\curl-ca-bundle.crt
*  CApath: none
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [93 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [5077 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS change cipher, Change cipher spec (1):
{ [1 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / [blank] / UNDEF
* ALPN: server did not agree on a protocol. Uses default.
* Server certificate:
*  subject: CN=*.so.com
*  start date: Aug 28 00:00:00 2025 GMT
*  expire date: Sep 28 23:59:59 2026 GMT
*  subjectAltName: host "www.so.com" matched cert's "*.so.com"
*  issuer: C=CN; O=WoTrus CA Limited; CN=WoTrus DV Server CA  [Run by the Issuer]
*  SSL certificate verify ok.
*   Certificate level 0: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type ? (2048/112 Bits/secBits), signed using sha384WithRSAEncryption
*   Certificate level 2: Public key type ? (4096/128 Bits/secBits), signed using sha384WithRSAEncryption
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD / HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.12.1
> Accept: */*
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Server: openresty
< Date: Thu, 11 Sep 2025 16:15:14 GMT
< Content-Type: text/html; charset=UTF-8
< Connection: keep-alive
< Vary: Accept-Encoding
< Set-Cookie: _S=8h6j94t4plft8e0ohj166jtra7; expires=Thu, 11-Sep-2025 16:25:14 GMT; Max-Age=600; path=/
< Expires: Thu, 19 Nov 1981 08:52:00 GMT
< Cache-Control: no-store, no-cache, must-revalidate
< Pragma: no-cache
< php-waf-rep: -
< Set-Cookie: QiHooGUID=A197D95FCBD0E72D10AF11E4851D18EE.1757607314878; Max-Age=63072000; Domain=so.com; Path=/
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #1 to host localhost left intact
HTTP/1.1 302 Found
Connection: keep-alive
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:15:14 GMT
Location: https://www.so.com/
Server: openresty
Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/
HTTP/1.1 200 Connection established
HTTP/1.1 200 OK
Server: openresty
Date: Thu, 11 Sep 2025 16:15:14 GMT
Content-Type: text/html; charset=UTF-8
Connection: keep-alive
Vary: Accept-Encoding
Set-Cookie: _S=8h6j94t4plft8e0ohj166jtra7; expires=Thu, 11-Sep-2025 16:25:14 GMT; Max-Age=600; path=/
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate
Pragma: no-cache
php-waf-rep: -
Set-Cookie: QiHooGUID=A197D95FCBD0E72D10AF11E4851D18EE.1757607314878; Max-Age=63072000; Domain=so.com; Path=/
### Curlæµ‹è¯•3è¾“å‡º ###
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.baidu.com:443
> CONNECT www.baidu.com:443 HTTP/1.1
> Host: www.baidu.com:443
> User-Agent: curl/8.12.1
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [308 bytes data]
*  CAfile: D:\è¿…é›·ä¸‹è½½\curl-8.12.1_4-win64-mingw\bin\curl-ca-bundle.crt
*  CApath: none
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [102 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [4771 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS change cipher, Change cipher spec (1):
{ [1 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / [blank] / UNDEF
* ALPN: server accepted http/1.1
* Server certificate:
*  subject: C=CN; ST=beijing; L=beijing; O=Beijing Baidu Netcom Science Technology Co., Ltd; CN=baidu.com
*  start date: Jul  9 07:01:02 2025 GMT
*  expire date: Aug 10 07:01:01 2026 GMT
*  subjectAltName: host "www.baidu.com" matched cert's "*.baidu.com"
*  issuer: C=BE; O=GlobalSign nv-sa; CN=GlobalSign RSA OV SSL CA 2018
*  SSL certificate verify ok.
*   Certificate level 0: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 2: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD / HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.12.1
> Accept: */*
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
< Connection: keep-alive
< Content-Length: 277
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:15:14 GMT
< Etag: "575e1f60-115"
< Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
< Pragma: no-cache
< Server: bfe/1.0.8.18
< Tr_id: bfe_9664648716012827669
< 
  0   277    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 Connection established
HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
Connection: keep-alive
Content-Length: 277
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:15:14 GMT
Etag: "575e1f60-115"
Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
Pragma: no-cache
Server: bfe/1.0.8.18
Tr_id: bfe_9664648716012827669
```

âœ… ç«¯å£8080å·²æˆåŠŸé‡Šæ”¾


###

# HTTPä»£ç†æœåŠ¡å™¨æµ‹è¯•è®°å½•

## æµ‹è¯•æ—¶é—´
2025-09-12 00:18:01

## 1. å¯åŠ¨ä»£ç†æœåŠ¡å™¨

æ‰§è¡Œå‘½ä»¤: `go run -v ../cmd/main.go`

ç¼–è¯‘ä»£ç†æœåŠ¡å™¨...
âœ… ä»£ç†æœåŠ¡å™¨ç¼–è¯‘æˆåŠŸ

ðŸ“‹ ä»£ç†æœåŠ¡å™¨è¿›ç¨‹PID: 54180

ç­‰å¾…æœåŠ¡å™¨å¯åŠ¨...
âœ… ä»£ç†æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ

## 2. æµ‹è¯•HTTPä»£ç†åŠŸèƒ½

### æµ‹è¯•1: åŸºæœ¬HTTPä»£ç†

æ‰§è¡Œå‘½ä»¤: `curl -v -I http://www.baidu.com -x http://localhost:8080`

ðŸ“‹ Curlæµ‹è¯•1è¿›ç¨‹PID: 42392

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD http://www.baidu.com/ HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.12.1
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
< Connection: keep-alive
< Content-Length: 277
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:17:53 GMT
< Etag: "575e1f60-115"
< Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
< Pragma: no-cache
< Server: bfe/1.0.8.18
< Tr_id: bfe_8723365551247301383
< 
  0   277    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
Connection: keep-alive
Content-Length: 277
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:17:53 GMT
Etag: "575e1f60-115"
Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
Pragma: no-cache
Server: bfe/1.0.8.18
Tr_id: bfe_8723365551247301383


```

### æµ‹è¯•2: HTTPä»£ç†www.so.com

æ‰§è¡Œå‘½ä»¤: `curl -v -I http://www.so.com -x http://localhost:8080 -L`

ðŸ“‹ Curlæµ‹è¯•2è¿›ç¨‹PID: 31832

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD http://www.so.com/ HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.12.1
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 302 Found
< Connection: keep-alive
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:17:53 GMT
< Location: https://www.so.com/
< Server: openresty
< Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/
* Ignoring the response-body
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
* Clear auth, redirects to port from 80 to 443
* Issue another request to this URL: 'https://www.so.com/'
* Hostname localhost was found in DNS cache
*   Trying [::1]:8080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.so.com:443
> CONNECT www.so.com:443 HTTP/1.1
> Host: www.so.com:443
> User-Agent: curl/8.12.1
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [305 bytes data]
*  CAfile: D:\è¿…é›·ä¸‹è½½\curl-8.12.1_4-win64-mingw\bin\curl-ca-bundle.crt
*  CApath: none
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [93 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [5077 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS change cipher, Change cipher spec (1):
{ [1 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / [blank] / UNDEF
* ALPN: server did not agree on a protocol. Uses default.
* Server certificate:
*  subject: CN=*.so.com
*  start date: Aug 28 00:00:00 2025 GMT
*  expire date: Sep 28 23:59:59 2026 GMT
*  subjectAltName: host "www.so.com" matched cert's "*.so.com"
*  issuer: C=CN; O=WoTrus CA Limited; CN=WoTrus DV Server CA  [Run by the Issuer]
*  SSL certificate verify ok.
*   Certificate level 0: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type ? (2048/112 Bits/secBits), signed using sha384WithRSAEncryption
*   Certificate level 2: Public key type ? (4096/128 Bits/secBits), signed using sha384WithRSAEncryption
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD / HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.12.1
> Accept: */*
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Server: openresty
< Date: Thu, 11 Sep 2025 16:17:53 GMT
< Content-Type: text/html; charset=UTF-8
< Connection: keep-alive
< Vary: Accept-Encoding
< Set-Cookie: _S=usq5ufvoduqc3658dv3ra79t63; expires=Thu, 11-Sep-2025 16:27:53 GMT; Max-Age=600; path=/
< Expires: Thu, 19 Nov 1981 08:52:00 GMT
< Cache-Control: no-store, no-cache, must-revalidate
< Pragma: no-cache
< php-waf-rep: -
< Set-Cookie: QiHooGUID=7D491BD96792B870959F3165E1EBC55A.1757607473917; Max-Age=63072000; Domain=so.com; Path=/
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #1 to host localhost left intact
HTTP/1.1 302 Found
Connection: keep-alive
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:17:53 GMT
Location: https://www.so.com/
Server: openresty
Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/

HTTP/1.1 200 Connection established

HTTP/1.1 200 OK
Server: openresty
Date: Thu, 11 Sep 2025 16:17:53 GMT
Content-Type: text/html; charset=UTF-8
Connection: keep-alive
Vary: Accept-Encoding
Set-Cookie: _S=usq5ufvoduqc3658dv3ra79t63; expires=Thu, 11-Sep-2025 16:27:53 GMT; Max-Age=600; path=/
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate
Pragma: no-cache
php-waf-rep: -
Set-Cookie: QiHooGUID=7D491BD96792B870959F3165E1EBC55A.1757607473917; Max-Age=63072000; Domain=so.com; Path=/


```

### æµ‹è¯•3: HTTPSä»£ç†

æ‰§è¡Œå‘½ä»¤: `curl -v -I https://www.baidu.com -x http://localhost:8080`

ðŸ“‹ Curlæµ‹è¯•3è¿›ç¨‹PID: 32192

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.baidu.com:443
> CONNECT www.baidu.com:443 HTTP/1.1
> Host: www.baidu.com:443
> User-Agent: curl/8.12.1
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [308 bytes data]
*  CAfile: D:\è¿…é›·ä¸‹è½½\curl-8.12.1_4-win64-mingw\bin\curl-ca-bundle.crt
*  CApath: none
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [102 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [4771 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS change cipher, Change cipher spec (1):
{ [1 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / [blank] / UNDEF
* ALPN: server accepted http/1.1
* Server certificate:
*  subject: C=CN; ST=beijing; L=beijing; O=Beijing Baidu Netcom Science Technology Co., Ltd; CN=baidu.com
*  start date: Jul  9 07:01:02 2025 GMT
*  expire date: Aug 10 07:01:01 2026 GMT
*  subjectAltName: host "www.baidu.com" matched cert's "*.baidu.com"
*  issuer: C=BE; O=GlobalSign nv-sa; CN=GlobalSign RSA OV SSL CA 2018
*  SSL certificate verify ok.
*   Certificate level 0: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 2: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD / HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.12.1
> Accept: */*
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
< Connection: keep-alive
< Content-Length: 277
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:17:54 GMT
< Etag: "575e1f60-115"
< Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
< Pragma: no-cache
< Server: bfe/1.0.8.18
< Tr_id: bfe_8250509104047754185
< 
  0   277    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 Connection established

HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
Connection: keep-alive
Content-Length: 277
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:17:54 GMT
Etag: "575e1f60-115"
Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
Pragma: no-cache
Server: bfe/1.0.8.18
Tr_id: bfe_8250509104047754185


```

### ðŸ“‹ æ‰€æœ‰è¿›ç¨‹PIDè®°å½•

æ‰€æœ‰è¿›ç¨‹PID: 54180, 42392, 31832, 32192



###

# HTTPä»£ç†æœåŠ¡å™¨æµ‹è¯•è®°å½•

## æµ‹è¯•æ—¶é—´
2025-09-12 00:18:01

## 1. å¯åŠ¨ä»£ç†æœåŠ¡å™¨

æ‰§è¡Œå‘½ä»¤: `go run -v ../cmd/main.go`

ç¼–è¯‘ä»£ç†æœåŠ¡å™¨...
âœ… ä»£ç†æœåŠ¡å™¨ç¼–è¯‘æˆåŠŸ

ðŸ“‹ ä»£ç†æœåŠ¡å™¨è¿›ç¨‹PID: 54180

ç­‰å¾…æœåŠ¡å™¨å¯åŠ¨...
âœ… ä»£ç†æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ

## 2. æµ‹è¯•HTTPä»£ç†åŠŸèƒ½

### æµ‹è¯•1: åŸºæœ¬HTTPä»£ç†

æ‰§è¡Œå‘½ä»¤: `curl -v -I http://www.baidu.com -x http://localhost:8080`

ðŸ“‹ Curlæµ‹è¯•1è¿›ç¨‹PID: 42392

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD http://www.baidu.com/ HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.12.1
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
< Connection: keep-alive
< Content-Length: 277
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:17:53 GMT
< Etag: "575e1f60-115"
< Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
< Pragma: no-cache
< Server: bfe/1.0.8.18
< Tr_id: bfe_8723365551247301383
< 
  0   277    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
Connection: keep-alive
Content-Length: 277
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:17:53 GMT
Etag: "575e1f60-115"
Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
Pragma: no-cache
Server: bfe/1.0.8.18
Tr_id: bfe_8723365551247301383


```

### æµ‹è¯•2: HTTPä»£ç†www.so.com

æ‰§è¡Œå‘½ä»¤: `curl -v -I http://www.so.com -x http://localhost:8080 -L`

ðŸ“‹ Curlæµ‹è¯•2è¿›ç¨‹PID: 31832

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD http://www.so.com/ HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.12.1
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 302 Found
< Connection: keep-alive
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:17:53 GMT
< Location: https://www.so.com/
< Server: openresty
< Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/
* Ignoring the response-body
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
* Clear auth, redirects to port from 80 to 443
* Issue another request to this URL: 'https://www.so.com/'
* Hostname localhost was found in DNS cache
*   Trying [::1]:8080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.so.com:443
> CONNECT www.so.com:443 HTTP/1.1
> Host: www.so.com:443
> User-Agent: curl/8.12.1
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [305 bytes data]
*  CAfile: D:\è¿…é›·ä¸‹è½½\curl-8.12.1_4-win64-mingw\bin\curl-ca-bundle.crt
*  CApath: none
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [93 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [5077 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS change cipher, Change cipher spec (1):
{ [1 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / [blank] / UNDEF
* ALPN: server did not agree on a protocol. Uses default.
* Server certificate:
*  subject: CN=*.so.com
*  start date: Aug 28 00:00:00 2025 GMT
*  expire date: Sep 28 23:59:59 2026 GMT
*  subjectAltName: host "www.so.com" matched cert's "*.so.com"
*  issuer: C=CN; O=WoTrus CA Limited; CN=WoTrus DV Server CA  [Run by the Issuer]
*  SSL certificate verify ok.
*   Certificate level 0: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type ? (2048/112 Bits/secBits), signed using sha384WithRSAEncryption
*   Certificate level 2: Public key type ? (4096/128 Bits/secBits), signed using sha384WithRSAEncryption
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD / HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.12.1
> Accept: */*
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Server: openresty
< Date: Thu, 11 Sep 2025 16:17:53 GMT
< Content-Type: text/html; charset=UTF-8
< Connection: keep-alive
< Vary: Accept-Encoding
< Set-Cookie: _S=usq5ufvoduqc3658dv3ra79t63; expires=Thu, 11-Sep-2025 16:27:53 GMT; Max-Age=600; path=/
< Expires: Thu, 19 Nov 1981 08:52:00 GMT
< Cache-Control: no-store, no-cache, must-revalidate
< Pragma: no-cache
< php-waf-rep: -
< Set-Cookie: QiHooGUID=7D491BD96792B870959F3165E1EBC55A.1757607473917; Max-Age=63072000; Domain=so.com; Path=/
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #1 to host localhost left intact
HTTP/1.1 302 Found
Connection: keep-alive
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:17:53 GMT
Location: https://www.so.com/
Server: openresty
Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/

HTTP/1.1 200 Connection established

HTTP/1.1 200 OK
Server: openresty
Date: Thu, 11 Sep 2025 16:17:53 GMT
Content-Type: text/html; charset=UTF-8
Connection: keep-alive
Vary: Accept-Encoding
Set-Cookie: _S=usq5ufvoduqc3658dv3ra79t63; expires=Thu, 11-Sep-2025 16:27:53 GMT; Max-Age=600; path=/
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate
Pragma: no-cache
php-waf-rep: -
Set-Cookie: QiHooGUID=7D491BD96792B870959F3165E1EBC55A.1757607473917; Max-Age=63072000; Domain=so.com; Path=/


```

### æµ‹è¯•3: HTTPSä»£ç†

æ‰§è¡Œå‘½ä»¤: `curl -v -I https://www.baidu.com -x http://localhost:8080`

ðŸ“‹ Curlæµ‹è¯•3è¿›ç¨‹PID: 32192

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.baidu.com:443
> CONNECT www.baidu.com:443 HTTP/1.1
> Host: www.baidu.com:443
> User-Agent: curl/8.12.1
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [308 bytes data]
*  CAfile: D:\è¿…é›·ä¸‹è½½\curl-8.12.1_4-win64-mingw\bin\curl-ca-bundle.crt
*  CApath: none
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [102 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [4771 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS change cipher, Change cipher spec (1):
{ [1 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / [blank] / UNDEF
* ALPN: server accepted http/1.1
* Server certificate:
*  subject: C=CN; ST=beijing; L=beijing; O=Beijing Baidu Netcom Science Technology Co., Ltd; CN=baidu.com
*  start date: Jul  9 07:01:02 2025 GMT
*  expire date: Aug 10 07:01:01 2026 GMT
*  subjectAltName: host "www.baidu.com" matched cert's "*.baidu.com"
*  issuer: C=BE; O=GlobalSign nv-sa; CN=GlobalSign RSA OV SSL CA 2018
*  SSL certificate verify ok.
*   Certificate level 0: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 2: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD / HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.12.1
> Accept: */*
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
< Connection: keep-alive
< Content-Length: 277
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:17:54 GMT
< Etag: "575e1f60-115"
< Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
< Pragma: no-cache
< Server: bfe/1.0.8.18
< Tr_id: bfe_8250509104047754185
< 
  0   277    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 Connection established

HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
Connection: keep-alive
Content-Length: 277
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:17:54 GMT
Etag: "575e1f60-115"
Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
Pragma: no-cache
Server: bfe/1.0.8.18
Tr_id: bfe_8250509104047754185


```

### ðŸ“‹ æ‰€æœ‰è¿›ç¨‹PIDè®°å½•

æ‰€æœ‰è¿›ç¨‹PID: 54180, 42392, 31832, 32192

## 3. å…³é—­ä»£ç†æœåŠ¡å™¨

âœ… æ‰€æœ‰curlæµ‹è¯•æˆåŠŸï¼Œæ­£åœ¨å…³é—­ä»£ç†æœåŠ¡å™¨è¿›ç¨‹...

ðŸ›‘ æ­£åœ¨ç»ˆæ­¢ä»£ç†æœåŠ¡å™¨è¿›ç¨‹...
âœ… ä»£ç†æœåŠ¡å™¨è¿›ç¨‹å·²ç»ˆæ­¢

ðŸ§¹ æ­£åœ¨æ¸…ç†æ‰€æœ‰å­è¿›ç¨‹...

âœ… æ‰€æœ‰å­è¿›ç¨‹å·²æ¸…ç†å®Œæˆ

ðŸ§¹ å·²æ¸…ç†ç¼–è¯‘çš„å¯æ‰§è¡Œæ–‡ä»¶
### ä»£ç†æœåŠ¡å™¨æ—¥å¿—è¾“å‡º

```
2025/09/12 00:18:02 main.go:518: ä»£ç†æœåŠ¡å™¨å¯åŠ¨ä¸­...
2025/09/12 00:18:02 main.go:562: dohalpn: []
2025/09/12 00:18:02 main.go:564: hostname: 0.0.0.0
2025/09/12 00:18:02 main.go:566: port: 8080
2025/09/12 00:18:02 main.go:568: server_cert: 
2025/09/12 00:18:02 main.go:570: server_key: 
2025/09/12 00:18:02 main.go:572: username: 
2025/09/12 00:18:02 main.go:574: password: 
2025/09/12 00:18:02 main.go:576: dohurl: []
2025/09/12 00:18:02 main.go:578: dohip: []
2025/09/12 00:18:02 main.go:579: upstream-type: 
2025/09/12 00:18:02 main.go:580: upstream-address: 
2025/09/12 00:18:02 main.go:581: upstream-username: 
2025/09/12 00:18:02 main.go:582: upstream-password: 
2025/09/12 00:18:02 main.go:854: null
2025/09/12 00:18:02 simple.go:31: Proxy server started on port [::]:8080
2025/09/12 00:18:02 http.go:372: Random IP: 127.97.203.178
2025/09/12 00:18:02 http.go:390: Random integer: 35265
2025/09/12 00:18:02 http.go:342: Proxy server started on port 127.97.203.178:35265
2025/09/12 00:18:03 simple.go:57: remote addr: [::1]:6447
2025/09/12 00:18:03 simple.go:72: GET http://www.baidu.com/ HTTP/1.1
2025/09/12 00:18:03 simple.go:298: Domain: www.baidu.com, Port: 80
2025/09/12 00:18:03 simple.go:110: address:www.baidu.com:80
2025/09/12 00:18:03 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy 127.97.203.178:35265
2025/09/12 00:18:03 simple.go:227: è¿žæŽ¥æˆåŠŸï¼š127.97.203.178:35265
2025/09/12 00:18:03 simple.go:241: clienthost: ::1
2025/09/12 00:18:03 simple.go:242: clientport: 6447
2025/09/12 00:18:03 simple.go:271: simple Handle header:
2025/09/12 00:18:03 simple.go:274: simple Handle Forwarded : for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http
2025/09/12 00:18:03 simple.go:276: GET / HTTP/1.1
2025/09/12 00:18:03 simple.go:281: Forwarded: for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http
2025/09/12 00:18:03 simple.go:287: Host: www.baidu.com
User-Agent: Go-http-client/1.1
Accept-Encoding: gzip
2025/09/12 00:18:03 http.go:90: method: GET
2025/09/12 00:18:03 http.go:91: url: /
2025/09/12 00:18:03 http.go:92: host: www.baidu.com
2025/09/12 00:18:03 http.go:93: proxyHandler header:
2025/09/12 00:18:03 http.go:120: clienthost: 127.0.0.1
2025/09/12 00:18:03 http.go:121: clientport: 6448
2025/09/12 00:18:03 http.go:132: proxyHandler Forwarded : for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http,for=127.0.0.1;by=127.97.203.178:35265;host=www.baidu.com;proto=http
2025/09/12 00:18:03 http.go:132: proxyHandler User-Agent : Go-http-client/1.1
2025/09/12 00:18:03 http.go:132: proxyHandler Accept-Encoding : gzip
2025/09/12 00:18:03 http.go:135: forwardedHeader: for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http, for=127.0.0.1;by=127.97.203.178:35265;host=www.baidu.com;proto=http
2025/09/12 00:18:03 http.go:137: forwardedByList: [{[::1]:8080} {127.97.203.178:35265}]
2025/09/12 00:18:03 http.go:155: targetUrl: http://www.baidu.com/
2025/09/12 00:18:03 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.baidu.com
[GIN] 2025/09/12 - 00:18:03 | 200 |     50.4828ms |       127.0.0.1 | GET      "/"
2025/09/12 00:18:05 simple.go:57: remote addr: [::1]:6457
2025/09/12 00:18:05 simple.go:72: HEAD http://www.baidu.com/ HTTP/1.1
2025/09/12 00:18:05 simple.go:298: Domain: www.baidu.com, Port: 80
2025/09/12 00:18:05 simple.go:110: address:www.baidu.com:80
2025/09/12 00:18:05 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy 127.97.203.178:35265
2025/09/12 00:18:05 simple.go:227: è¿žæŽ¥æˆåŠŸï¼š127.97.203.178:35265
2025/09/12 00:18:05 simple.go:241: clienthost: ::1
2025/09/12 00:18:05 simple.go:242: clientport: 6457
2025/09/12 00:18:05 simple.go:271: simple Handle header:
2025/09/12 00:18:05 simple.go:274: simple Handle Forwarded : for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http
2025/09/12 00:18:05 simple.go:276: HEAD / HTTP/1.1
2025/09/12 00:18:05 simple.go:281: Forwarded: for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http
2025/09/12 00:18:05 simple.go:287: Host: www.baidu.com
User-Agent: curl/8.12.1
Accept: */*
Proxy-Connection: Keep-Alive
2025/09/12 00:18:05 http.go:90: method: HEAD
2025/09/12 00:18:05 http.go:91: url: /
2025/09/12 00:18:05 http.go:92: host: www.baidu.com
2025/09/12 00:18:05 http.go:93: proxyHandler header:
2025/09/12 00:18:05 http.go:120: clienthost: 127.0.0.1
2025/09/12 00:18:05 http.go:121: clientport: 6458
2025/09/12 00:18:05 http.go:132: proxyHandler Proxy-Connection : Keep-Alive
2025/09/12 00:18:05 http.go:132: proxyHandler Forwarded : for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http,for=127.0.0.1;by=127.97.203.178:35265;host=www.baidu.com;proto=http
2025/09/12 00:18:05 http.go:132: proxyHandler User-Agent : curl/8.12.1
2025/09/12 00:18:05 http.go:132: proxyHandler Accept : */*
2025/09/12 00:18:05 http.go:135: forwardedHeader: for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http, for=127.0.0.1;by=127.97.203.178:35265;host=www.baidu.com;proto=http
2025/09/12 00:18:05 http.go:137: forwardedByList: [{[::1]:8080} {127.97.203.178:35265}]
2025/09/12 00:18:05 http.go:155: targetUrl: http://www.baidu.com/
2025/09/12 00:18:05 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.baidu.com
[GIN] 2025/09/12 - 00:18:05 | 200 |     15.2367ms |       127.0.0.1 | HEAD     "/"
2025/09/12 00:18:05 simple.go:57: remote addr: [::1]:6459
2025/09/12 00:18:05 simple.go:72: HEAD http://www.so.com/ HTTP/1.1
2025/09/12 00:18:05 simple.go:298: Domain: www.so.com, Port: 80
2025/09/12 00:18:05 simple.go:110: address:www.so.com:80
2025/09/12 00:18:05 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy 127.97.203.178:35265
2025/09/12 00:18:05 simple.go:227: è¿žæŽ¥æˆåŠŸï¼š127.97.203.178:35265
2025/09/12 00:18:05 simple.go:241: clienthost: ::1
2025/09/12 00:18:05 simple.go:242: clientport: 6459
2025/09/12 00:18:05 simple.go:271: simple Handle header:
2025/09/12 00:18:05 simple.go:274: simple Handle Forwarded : for=::1;by=[::1]:8080;host=www.so.com:80;proto=http
2025/09/12 00:18:05 simple.go:276: HEAD / HTTP/1.1
2025/09/12 00:18:05 simple.go:281: Forwarded: for=::1;by=[::1]:8080;host=www.so.com:80;proto=http
2025/09/12 00:18:05 simple.go:287: Host: www.so.com
User-Agent: curl/8.12.1
Accept: */*
Proxy-Connection: Keep-Alive
2025/09/12 00:18:05 http.go:90: method: HEAD
2025/09/12 00:18:05 http.go:91: url: /
2025/09/12 00:18:05 http.go:92: host: www.so.com
2025/09/12 00:18:05 http.go:93: proxyHandler header:
2025/09/12 00:18:05 http.go:120: clienthost: 127.0.0.1
2025/09/12 00:18:05 http.go:121: clientport: 6460
2025/09/12 00:18:05 http.go:132: proxyHandler Accept : */*
2025/09/12 00:18:05 http.go:132: proxyHandler Proxy-Connection : Keep-Alive
2025/09/12 00:18:05 http.go:132: proxyHandler Forwarded : for=::1;by=[::1]:8080;host=www.so.com:80;proto=http,for=127.0.0.1;by=127.97.203.178:35265;host=www.so.com;proto=http
2025/09/12 00:18:05 http.go:132: proxyHandler User-Agent : curl/8.12.1
2025/09/12 00:18:05 http.go:135: forwardedHeader: for=::1;by=[::1]:8080;host=www.so.com:80;proto=http, for=127.0.0.1;by=127.97.203.178:35265;host=www.so.com;proto=http
2025/09/12 00:18:05 http.go:137: forwardedByList: [{[::1]:8080} {127.97.203.178:35265}]
2025/09/12 00:18:05 http.go:155: targetUrl: http://www.so.com/
2025/09/12 00:18:05 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.so.com
[GIN] 2025/09/12 - 00:18:05 | 302 |     25.2747ms |       127.0.0.1 | HEAD     "/"
2025/09/12 00:18:05 simple.go:57: remote addr: [::1]:6462
2025/09/12 00:18:05 simple.go:72: CONNECT www.so.com:443 HTTP/1.1
2025/09/12 00:18:05 simple.go:110: address:www.so.com:443
2025/09/12 00:18:05 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.so.com:443
2025/09/12 00:18:05 options.go:98: hostname www.so.com no ip found
2025/09/12 00:18:05 options.go:123: success connect to www.so.com:443 by tcp
2025/09/12 00:18:05 simple.go:227: è¿žæŽ¥æˆåŠŸï¼šwww.so.com:443
2025/09/12 00:18:05 simple.go:57: remote addr: [::1]:6479
2025/09/12 00:18:05 simple.go:72: CONNECT www.baidu.com:443 HTTP/1.1
2025/09/12 00:18:05 simple.go:110: address:www.baidu.com:443
2025/09/12 00:18:05 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.baidu.com:443
2025/09/12 00:18:05 options.go:98: hostname www.baidu.com no ip found
2025/09/12 00:18:05 options.go:123: success connect to www.baidu.com:443 by tcp
2025/09/12 00:18:05 simple.go:227: è¿žæŽ¥æˆåŠŸï¼šwww.baidu.com:443
```

### æ‰€æœ‰å­è¿›ç¨‹æ—¥å¿—è¾“å‡º

```
### Curlæµ‹è¯•1è¾“å‡º ###
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD http://www.baidu.com/ HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.12.1
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
< Connection: keep-alive
< Content-Length: 277
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:17:53 GMT
< Etag: "575e1f60-115"
< Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
< Pragma: no-cache
< Server: bfe/1.0.8.18
< Tr_id: bfe_8723365551247301383
< 
  0   277    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
Connection: keep-alive
Content-Length: 277
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:17:53 GMT
Etag: "575e1f60-115"
Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
Pragma: no-cache
Server: bfe/1.0.8.18
Tr_id: bfe_8723365551247301383
### Curlæµ‹è¯•2è¾“å‡º ###
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD http://www.so.com/ HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.12.1
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 302 Found
< Connection: keep-alive
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:17:53 GMT
< Location: https://www.so.com/
< Server: openresty
< Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/
* Ignoring the response-body
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
* Clear auth, redirects to port from 80 to 443
* Issue another request to this URL: 'https://www.so.com/'
* Hostname localhost was found in DNS cache
*   Trying [::1]:8080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.so.com:443
> CONNECT www.so.com:443 HTTP/1.1
> Host: www.so.com:443
> User-Agent: curl/8.12.1
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [305 bytes data]
*  CAfile: D:\è¿…é›·ä¸‹è½½\curl-8.12.1_4-win64-mingw\bin\curl-ca-bundle.crt
*  CApath: none
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [93 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [5077 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS change cipher, Change cipher spec (1):
{ [1 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / [blank] / UNDEF
* ALPN: server did not agree on a protocol. Uses default.
* Server certificate:
*  subject: CN=*.so.com
*  start date: Aug 28 00:00:00 2025 GMT
*  expire date: Sep 28 23:59:59 2026 GMT
*  subjectAltName: host "www.so.com" matched cert's "*.so.com"
*  issuer: C=CN; O=WoTrus CA Limited; CN=WoTrus DV Server CA  [Run by the Issuer]
*  SSL certificate verify ok.
*   Certificate level 0: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type ? (2048/112 Bits/secBits), signed using sha384WithRSAEncryption
*   Certificate level 2: Public key type ? (4096/128 Bits/secBits), signed using sha384WithRSAEncryption
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD / HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.12.1
> Accept: */*
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Server: openresty
< Date: Thu, 11 Sep 2025 16:17:53 GMT
< Content-Type: text/html; charset=UTF-8
< Connection: keep-alive
< Vary: Accept-Encoding
< Set-Cookie: _S=usq5ufvoduqc3658dv3ra79t63; expires=Thu, 11-Sep-2025 16:27:53 GMT; Max-Age=600; path=/
< Expires: Thu, 19 Nov 1981 08:52:00 GMT
< Cache-Control: no-store, no-cache, must-revalidate
< Pragma: no-cache
< php-waf-rep: -
< Set-Cookie: QiHooGUID=7D491BD96792B870959F3165E1EBC55A.1757607473917; Max-Age=63072000; Domain=so.com; Path=/
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #1 to host localhost left intact
HTTP/1.1 302 Found
Connection: keep-alive
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:17:53 GMT
Location: https://www.so.com/
Server: openresty
Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/
HTTP/1.1 200 Connection established
HTTP/1.1 200 OK
Server: openresty
Date: Thu, 11 Sep 2025 16:17:53 GMT
Content-Type: text/html; charset=UTF-8
Connection: keep-alive
Vary: Accept-Encoding
Set-Cookie: _S=usq5ufvoduqc3658dv3ra79t63; expires=Thu, 11-Sep-2025 16:27:53 GMT; Max-Age=600; path=/
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate
Pragma: no-cache
php-waf-rep: -
Set-Cookie: QiHooGUID=7D491BD96792B870959F3165E1EBC55A.1757607473917; Max-Age=63072000; Domain=so.com; Path=/
### Curlæµ‹è¯•3è¾“å‡º ###
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.baidu.com:443
> CONNECT www.baidu.com:443 HTTP/1.1
> Host: www.baidu.com:443
> User-Agent: curl/8.12.1
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [308 bytes data]
*  CAfile: D:\è¿…é›·ä¸‹è½½\curl-8.12.1_4-win64-mingw\bin\curl-ca-bundle.crt
*  CApath: none
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [102 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [4771 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS change cipher, Change cipher spec (1):
{ [1 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / [blank] / UNDEF
* ALPN: server accepted http/1.1
* Server certificate:
*  subject: C=CN; ST=beijing; L=beijing; O=Beijing Baidu Netcom Science Technology Co., Ltd; CN=baidu.com
*  start date: Jul  9 07:01:02 2025 GMT
*  expire date: Aug 10 07:01:01 2026 GMT
*  subjectAltName: host "www.baidu.com" matched cert's "*.baidu.com"
*  issuer: C=BE; O=GlobalSign nv-sa; CN=GlobalSign RSA OV SSL CA 2018
*  SSL certificate verify ok.
*   Certificate level 0: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 2: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD / HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.12.1
> Accept: */*
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
< Connection: keep-alive
< Content-Length: 277
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:17:54 GMT
< Etag: "575e1f60-115"
< Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
< Pragma: no-cache
< Server: bfe/1.0.8.18
< Tr_id: bfe_8250509104047754185
< 
  0   277    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 Connection established
HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
Connection: keep-alive
Content-Length: 277
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:17:54 GMT
Etag: "575e1f60-115"
Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
Pragma: no-cache
Server: bfe/1.0.8.18
Tr_id: bfe_8250509104047754185
```

âœ… ç«¯å£8080å·²æˆåŠŸé‡Šæ”¾


###

# HTTPä»£ç†æœåŠ¡å™¨æµ‹è¯•è®°å½•

## æµ‹è¯•æ—¶é—´
2025-09-12 00:20:28

## 1. å¯åŠ¨ä»£ç†æœåŠ¡å™¨

æ‰§è¡Œå‘½ä»¤: `go run -v ../cmd/main.go`

ç¼–è¯‘ä»£ç†æœåŠ¡å™¨...
âœ… ä»£ç†æœåŠ¡å™¨ç¼–è¯‘æˆåŠŸ

ðŸ“‹ ä»£ç†æœåŠ¡å™¨è¿›ç¨‹PID: 51956

ç­‰å¾…æœåŠ¡å™¨å¯åŠ¨...
âœ… ä»£ç†æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ

## 2. æµ‹è¯•HTTPä»£ç†åŠŸèƒ½

### æµ‹è¯•1: åŸºæœ¬HTTPä»£ç†

æ‰§è¡Œå‘½ä»¤: `curl -v -I http://www.baidu.com -x http://localhost:8080`

ðŸ“‹ Curlæµ‹è¯•1è¿›ç¨‹PID: 53240

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD http://www.baidu.com/ HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.12.1
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
< Connection: keep-alive
< Content-Length: 277
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:20:20 GMT
< Etag: "575e1f60-115"
< Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
< Pragma: no-cache
< Server: bfe/1.0.8.18
< Tr_id: bfe_10574944984348671441
< 
  0   277    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
Connection: keep-alive
Content-Length: 277
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:20:20 GMT
Etag: "575e1f60-115"
Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
Pragma: no-cache
Server: bfe/1.0.8.18
Tr_id: bfe_10574944984348671441


```

### æµ‹è¯•2: HTTPä»£ç†www.so.com

æ‰§è¡Œå‘½ä»¤: `curl -v -I http://www.so.com -x http://localhost:8080 -L`

ðŸ“‹ Curlæµ‹è¯•2è¿›ç¨‹PID: 31160

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD http://www.so.com/ HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.12.1
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 302 Found
< Connection: keep-alive
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:20:20 GMT
< Location: https://www.so.com/
< Server: openresty
< Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/
* Ignoring the response-body
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
* Clear auth, redirects to port from 80 to 443
* Issue another request to this URL: 'https://www.so.com/'
* Hostname localhost was found in DNS cache
*   Trying [::1]:8080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.so.com:443
> CONNECT www.so.com:443 HTTP/1.1
> Host: www.so.com:443
> User-Agent: curl/8.12.1
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [305 bytes data]
*  CAfile: D:\è¿…é›·ä¸‹è½½\curl-8.12.1_4-win64-mingw\bin\curl-ca-bundle.crt
*  CApath: none
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [93 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [5077 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS change cipher, Change cipher spec (1):
{ [1 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / [blank] / UNDEF
* ALPN: server did not agree on a protocol. Uses default.
* Server certificate:
*  subject: CN=*.so.com
*  start date: Aug 28 00:00:00 2025 GMT
*  expire date: Sep 28 23:59:59 2026 GMT
*  subjectAltName: host "www.so.com" matched cert's "*.so.com"
*  issuer: C=CN; O=WoTrus CA Limited; CN=WoTrus DV Server CA  [Run by the Issuer]
*  SSL certificate verify ok.
*   Certificate level 0: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type ? (2048/112 Bits/secBits), signed using sha384WithRSAEncryption
*   Certificate level 2: Public key type ? (4096/128 Bits/secBits), signed using sha384WithRSAEncryption
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD / HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.12.1
> Accept: */*
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Server: openresty
< Date: Thu, 11 Sep 2025 16:20:20 GMT
< Content-Type: text/html; charset=UTF-8
< Connection: keep-alive
< Vary: Accept-Encoding
< Set-Cookie: _S=kvf7o8itsv0lfnjg6l181vr253; expires=Thu, 11-Sep-2025 16:30:20 GMT; Max-Age=600; path=/
< Expires: Thu, 19 Nov 1981 08:52:00 GMT
< Cache-Control: no-store, no-cache, must-revalidate
< Pragma: no-cache
< php-waf-rep: -
< Set-Cookie: QiHooGUID=012D839074930346EE73516444C5075C.1757607620796; Max-Age=63072000; Domain=so.com; Path=/
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #1 to host localhost left intact
HTTP/1.1 302 Found
Connection: keep-alive
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:20:20 GMT
Location: https://www.so.com/
Server: openresty
Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/

HTTP/1.1 200 Connection established

HTTP/1.1 200 OK
Server: openresty
Date: Thu, 11 Sep 2025 16:20:20 GMT
Content-Type: text/html; charset=UTF-8
Connection: keep-alive
Vary: Accept-Encoding
Set-Cookie: _S=kvf7o8itsv0lfnjg6l181vr253; expires=Thu, 11-Sep-2025 16:30:20 GMT; Max-Age=600; path=/
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate
Pragma: no-cache
php-waf-rep: -
Set-Cookie: QiHooGUID=012D839074930346EE73516444C5075C.1757607620796; Max-Age=63072000; Domain=so.com; Path=/


```

### æµ‹è¯•3: HTTPSä»£ç†

æ‰§è¡Œå‘½ä»¤: `curl -v -I https://www.baidu.com -x http://localhost:8080`

ðŸ“‹ Curlæµ‹è¯•3è¿›ç¨‹PID: 53712

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.baidu.com:443
> CONNECT www.baidu.com:443 HTTP/1.1
> Host: www.baidu.com:443
> User-Agent: curl/8.12.1
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [308 bytes data]
*  CAfile: D:\è¿…é›·ä¸‹è½½\curl-8.12.1_4-win64-mingw\bin\curl-ca-bundle.crt
*  CApath: none
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [102 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [4771 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS change cipher, Change cipher spec (1):
{ [1 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / [blank] / UNDEF
* ALPN: server accepted http/1.1
* Server certificate:
*  subject: C=CN; ST=beijing; L=beijing; O=Beijing Baidu Netcom Science Technology Co., Ltd; CN=baidu.com
*  start date: Jul  9 07:01:02 2025 GMT
*  expire date: Aug 10 07:01:01 2026 GMT
*  subjectAltName: host "www.baidu.com" matched cert's "*.baidu.com"
*  issuer: C=BE; O=GlobalSign nv-sa; CN=GlobalSign RSA OV SSL CA 2018
*  SSL certificate verify ok.
*   Certificate level 0: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 2: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD / HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.12.1
> Accept: */*
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
< Connection: keep-alive
< Content-Length: 277
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:20:20 GMT
< Etag: "575e1f60-115"
< Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
< Pragma: no-cache
< Server: bfe/1.0.8.18
< Tr_id: bfe_8261790080290078198
< 
  0   277    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 Connection established

HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
Connection: keep-alive
Content-Length: 277
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:20:20 GMT
Etag: "575e1f60-115"
Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
Pragma: no-cache
Server: bfe/1.0.8.18
Tr_id: bfe_8261790080290078198


```

### ðŸ“‹ æ‰€æœ‰è¿›ç¨‹PIDè®°å½•

æ‰€æœ‰è¿›ç¨‹PID: 51956, 53240, 31160, 53712



###

# HTTPä»£ç†æœåŠ¡å™¨æµ‹è¯•è®°å½•

## æµ‹è¯•æ—¶é—´
2025-09-12 00:20:28

## 1. å¯åŠ¨ä»£ç†æœåŠ¡å™¨

æ‰§è¡Œå‘½ä»¤: `go run -v ../cmd/main.go`

ç¼–è¯‘ä»£ç†æœåŠ¡å™¨...
âœ… ä»£ç†æœåŠ¡å™¨ç¼–è¯‘æˆåŠŸ

ðŸ“‹ ä»£ç†æœåŠ¡å™¨è¿›ç¨‹PID: 51956

ç­‰å¾…æœåŠ¡å™¨å¯åŠ¨...
âœ… ä»£ç†æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ

## 2. æµ‹è¯•HTTPä»£ç†åŠŸèƒ½

### æµ‹è¯•1: åŸºæœ¬HTTPä»£ç†

æ‰§è¡Œå‘½ä»¤: `curl -v -I http://www.baidu.com -x http://localhost:8080`

ðŸ“‹ Curlæµ‹è¯•1è¿›ç¨‹PID: 53240

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD http://www.baidu.com/ HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.12.1
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
< Connection: keep-alive
< Content-Length: 277
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:20:20 GMT
< Etag: "575e1f60-115"
< Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
< Pragma: no-cache
< Server: bfe/1.0.8.18
< Tr_id: bfe_10574944984348671441
< 
  0   277    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
Connection: keep-alive
Content-Length: 277
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:20:20 GMT
Etag: "575e1f60-115"
Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
Pragma: no-cache
Server: bfe/1.0.8.18
Tr_id: bfe_10574944984348671441


```

### æµ‹è¯•2: HTTPä»£ç†www.so.com

æ‰§è¡Œå‘½ä»¤: `curl -v -I http://www.so.com -x http://localhost:8080 -L`

ðŸ“‹ Curlæµ‹è¯•2è¿›ç¨‹PID: 31160

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD http://www.so.com/ HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.12.1
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 302 Found
< Connection: keep-alive
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:20:20 GMT
< Location: https://www.so.com/
< Server: openresty
< Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/
* Ignoring the response-body
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
* Clear auth, redirects to port from 80 to 443
* Issue another request to this URL: 'https://www.so.com/'
* Hostname localhost was found in DNS cache
*   Trying [::1]:8080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.so.com:443
> CONNECT www.so.com:443 HTTP/1.1
> Host: www.so.com:443
> User-Agent: curl/8.12.1
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [305 bytes data]
*  CAfile: D:\è¿…é›·ä¸‹è½½\curl-8.12.1_4-win64-mingw\bin\curl-ca-bundle.crt
*  CApath: none
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [93 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [5077 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS change cipher, Change cipher spec (1):
{ [1 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / [blank] / UNDEF
* ALPN: server did not agree on a protocol. Uses default.
* Server certificate:
*  subject: CN=*.so.com
*  start date: Aug 28 00:00:00 2025 GMT
*  expire date: Sep 28 23:59:59 2026 GMT
*  subjectAltName: host "www.so.com" matched cert's "*.so.com"
*  issuer: C=CN; O=WoTrus CA Limited; CN=WoTrus DV Server CA  [Run by the Issuer]
*  SSL certificate verify ok.
*   Certificate level 0: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type ? (2048/112 Bits/secBits), signed using sha384WithRSAEncryption
*   Certificate level 2: Public key type ? (4096/128 Bits/secBits), signed using sha384WithRSAEncryption
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD / HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.12.1
> Accept: */*
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Server: openresty
< Date: Thu, 11 Sep 2025 16:20:20 GMT
< Content-Type: text/html; charset=UTF-8
< Connection: keep-alive
< Vary: Accept-Encoding
< Set-Cookie: _S=kvf7o8itsv0lfnjg6l181vr253; expires=Thu, 11-Sep-2025 16:30:20 GMT; Max-Age=600; path=/
< Expires: Thu, 19 Nov 1981 08:52:00 GMT
< Cache-Control: no-store, no-cache, must-revalidate
< Pragma: no-cache
< php-waf-rep: -
< Set-Cookie: QiHooGUID=012D839074930346EE73516444C5075C.1757607620796; Max-Age=63072000; Domain=so.com; Path=/
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #1 to host localhost left intact
HTTP/1.1 302 Found
Connection: keep-alive
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:20:20 GMT
Location: https://www.so.com/
Server: openresty
Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/

HTTP/1.1 200 Connection established

HTTP/1.1 200 OK
Server: openresty
Date: Thu, 11 Sep 2025 16:20:20 GMT
Content-Type: text/html; charset=UTF-8
Connection: keep-alive
Vary: Accept-Encoding
Set-Cookie: _S=kvf7o8itsv0lfnjg6l181vr253; expires=Thu, 11-Sep-2025 16:30:20 GMT; Max-Age=600; path=/
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate
Pragma: no-cache
php-waf-rep: -
Set-Cookie: QiHooGUID=012D839074930346EE73516444C5075C.1757607620796; Max-Age=63072000; Domain=so.com; Path=/


```

### æµ‹è¯•3: HTTPSä»£ç†

æ‰§è¡Œå‘½ä»¤: `curl -v -I https://www.baidu.com -x http://localhost:8080`

ðŸ“‹ Curlæµ‹è¯•3è¿›ç¨‹PID: 53712

âœ… æµ‹è¯•æˆåŠŸ

è¾“å‡ºç»“æžœ:
```
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.baidu.com:443
> CONNECT www.baidu.com:443 HTTP/1.1
> Host: www.baidu.com:443
> User-Agent: curl/8.12.1
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [308 bytes data]
*  CAfile: D:\è¿…é›·ä¸‹è½½\curl-8.12.1_4-win64-mingw\bin\curl-ca-bundle.crt
*  CApath: none
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [102 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [4771 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS change cipher, Change cipher spec (1):
{ [1 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / [blank] / UNDEF
* ALPN: server accepted http/1.1
* Server certificate:
*  subject: C=CN; ST=beijing; L=beijing; O=Beijing Baidu Netcom Science Technology Co., Ltd; CN=baidu.com
*  start date: Jul  9 07:01:02 2025 GMT
*  expire date: Aug 10 07:01:01 2026 GMT
*  subjectAltName: host "www.baidu.com" matched cert's "*.baidu.com"
*  issuer: C=BE; O=GlobalSign nv-sa; CN=GlobalSign RSA OV SSL CA 2018
*  SSL certificate verify ok.
*   Certificate level 0: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 2: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD / HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.12.1
> Accept: */*
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
< Connection: keep-alive
< Content-Length: 277
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:20:20 GMT
< Etag: "575e1f60-115"
< Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
< Pragma: no-cache
< Server: bfe/1.0.8.18
< Tr_id: bfe_8261790080290078198
< 
  0   277    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 Connection established

HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
Connection: keep-alive
Content-Length: 277
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:20:20 GMT
Etag: "575e1f60-115"
Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
Pragma: no-cache
Server: bfe/1.0.8.18
Tr_id: bfe_8261790080290078198


```

### ðŸ“‹ æ‰€æœ‰è¿›ç¨‹PIDè®°å½•

æ‰€æœ‰è¿›ç¨‹PID: 51956, 53240, 31160, 53712

## 3. å…³é—­ä»£ç†æœåŠ¡å™¨

âœ… æ‰€æœ‰curlæµ‹è¯•æˆåŠŸï¼Œæ­£åœ¨å…³é—­ä»£ç†æœåŠ¡å™¨è¿›ç¨‹...

ðŸ›‘ æ­£åœ¨ç»ˆæ­¢ä»£ç†æœåŠ¡å™¨è¿›ç¨‹...
âœ… ä»£ç†æœåŠ¡å™¨è¿›ç¨‹å·²ç»ˆæ­¢

ðŸ§¹ æ­£åœ¨æ¸…ç†æ‰€æœ‰å­è¿›ç¨‹...

âœ… æ‰€æœ‰å­è¿›ç¨‹å·²æ¸…ç†å®Œæˆ

ðŸ§¹ å·²æ¸…ç†ç¼–è¯‘çš„å¯æ‰§è¡Œæ–‡ä»¶
### ä»£ç†æœåŠ¡å™¨æ—¥å¿—è¾“å‡º

```
2025/09/12 00:20:29 main.go:518: ä»£ç†æœåŠ¡å™¨å¯åŠ¨ä¸­...
2025/09/12 00:20:29 main.go:562: dohalpn: []
2025/09/12 00:20:29 main.go:564: hostname: 0.0.0.0
2025/09/12 00:20:29 main.go:566: port: 8080
2025/09/12 00:20:29 main.go:568: server_cert: 
2025/09/12 00:20:29 main.go:570: server_key: 
2025/09/12 00:20:29 main.go:572: username: 
2025/09/12 00:20:29 main.go:574: password: 
2025/09/12 00:20:29 main.go:576: dohurl: []
2025/09/12 00:20:29 main.go:578: dohip: []
2025/09/12 00:20:29 main.go:579: upstream-type: 
2025/09/12 00:20:29 main.go:580: upstream-address: 
2025/09/12 00:20:29 main.go:581: upstream-username: 
2025/09/12 00:20:29 main.go:582: upstream-password: 
2025/09/12 00:20:29 main.go:854: null
2025/09/12 00:20:29 simple.go:31: Proxy server started on port [::]:8080
2025/09/12 00:20:29 http.go:372: Random IP: 127.168.226.92
2025/09/12 00:20:29 http.go:390: Random integer: 50056
2025/09/12 00:20:29 http.go:342: Proxy server started on port 127.168.226.92:50056
2025/09/12 00:20:30 simple.go:57: remote addr: [::1]:7905
2025/09/12 00:20:30 simple.go:72: GET http://www.baidu.com/ HTTP/1.1
2025/09/12 00:20:30 simple.go:298: Domain: www.baidu.com, Port: 80
2025/09/12 00:20:30 simple.go:110: address:www.baidu.com:80
2025/09/12 00:20:30 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy 127.168.226.92:50056
2025/09/12 00:20:30 simple.go:227: è¿žæŽ¥æˆåŠŸï¼š127.168.226.92:50056
2025/09/12 00:20:30 simple.go:241: clienthost: ::1
2025/09/12 00:20:30 simple.go:242: clientport: 7905
2025/09/12 00:20:30 simple.go:271: simple Handle header:
2025/09/12 00:20:30 simple.go:274: simple Handle Forwarded : for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http
2025/09/12 00:20:30 simple.go:276: GET / HTTP/1.1
2025/09/12 00:20:30 simple.go:281: Forwarded: for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http
2025/09/12 00:20:30 simple.go:287: Host: www.baidu.com
User-Agent: Go-http-client/1.1
Accept-Encoding: gzip
2025/09/12 00:20:30 http.go:90: method: GET
2025/09/12 00:20:30 http.go:91: url: /
2025/09/12 00:20:30 http.go:92: host: www.baidu.com
2025/09/12 00:20:30 http.go:93: proxyHandler header:
2025/09/12 00:20:30 http.go:120: clienthost: 127.0.0.1
2025/09/12 00:20:30 http.go:121: clientport: 7906
2025/09/12 00:20:30 http.go:132: proxyHandler Forwarded : for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http,for=127.0.0.1;by=127.168.226.92:50056;host=www.baidu.com;proto=http
2025/09/12 00:20:30 http.go:132: proxyHandler User-Agent : Go-http-client/1.1
2025/09/12 00:20:30 http.go:132: proxyHandler Accept-Encoding : gzip
2025/09/12 00:20:30 http.go:135: forwardedHeader: for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http, for=127.0.0.1;by=127.168.226.92:50056;host=www.baidu.com;proto=http
2025/09/12 00:20:30 http.go:137: forwardedByList: [{[::1]:8080} {127.168.226.92:50056}]
2025/09/12 00:20:30 http.go:155: targetUrl: http://www.baidu.com/
2025/09/12 00:20:30 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.baidu.com
[GIN] 2025/09/12 - 00:20:30 | 200 |     64.9468ms |       127.0.0.1 | GET      "/"
2025/09/12 00:20:32 simple.go:57: remote addr: [::1]:7955
2025/09/12 00:20:32 simple.go:72: HEAD http://www.baidu.com/ HTTP/1.1
2025/09/12 00:20:32 simple.go:298: Domain: www.baidu.com, Port: 80
2025/09/12 00:20:32 simple.go:110: address:www.baidu.com:80
2025/09/12 00:20:32 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy 127.168.226.92:50056
2025/09/12 00:20:32 simple.go:227: è¿žæŽ¥æˆåŠŸï¼š127.168.226.92:50056
2025/09/12 00:20:32 simple.go:241: clienthost: ::1
2025/09/12 00:20:32 simple.go:242: clientport: 7955
2025/09/12 00:20:32 simple.go:271: simple Handle header:
2025/09/12 00:20:32 simple.go:274: simple Handle Forwarded : for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http
2025/09/12 00:20:32 simple.go:276: HEAD / HTTP/1.1
2025/09/12 00:20:32 simple.go:281: Forwarded: for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http
2025/09/12 00:20:32 simple.go:287: Host: www.baidu.com
User-Agent: curl/8.12.1
Accept: */*
Proxy-Connection: Keep-Alive
2025/09/12 00:20:32 http.go:90: method: HEAD
2025/09/12 00:20:32 http.go:91: url: /
2025/09/12 00:20:32 http.go:92: host: www.baidu.com
2025/09/12 00:20:32 http.go:93: proxyHandler header:
2025/09/12 00:20:32 http.go:120: clienthost: 127.0.0.1
2025/09/12 00:20:32 http.go:121: clientport: 7956
2025/09/12 00:20:32 http.go:132: proxyHandler Proxy-Connection : Keep-Alive
2025/09/12 00:20:32 http.go:132: proxyHandler Forwarded : for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http,for=127.0.0.1;by=127.168.226.92:50056;host=www.baidu.com;proto=http
2025/09/12 00:20:32 http.go:132: proxyHandler User-Agent : curl/8.12.1
2025/09/12 00:20:32 http.go:132: proxyHandler Accept : */*
2025/09/12 00:20:32 http.go:135: forwardedHeader: for=::1;by=[::1]:8080;host=www.baidu.com:80;proto=http, for=127.0.0.1;by=127.168.226.92:50056;host=www.baidu.com;proto=http
2025/09/12 00:20:32 http.go:137: forwardedByList: [{[::1]:8080} {127.168.226.92:50056}]
2025/09/12 00:20:32 http.go:155: targetUrl: http://www.baidu.com/
2025/09/12 00:20:32 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.baidu.com
[GIN] 2025/09/12 - 00:20:32 | 200 |     19.9876ms |       127.0.0.1 | HEAD     "/"
2025/09/12 00:20:32 simple.go:57: remote addr: [::1]:7957
2025/09/12 00:20:32 simple.go:72: HEAD http://www.so.com/ HTTP/1.1
2025/09/12 00:20:32 simple.go:298: Domain: www.so.com, Port: 80
2025/09/12 00:20:32 simple.go:110: address:www.so.com:80
2025/09/12 00:20:32 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy 127.168.226.92:50056
2025/09/12 00:20:32 simple.go:227: è¿žæŽ¥æˆåŠŸï¼š127.168.226.92:50056
2025/09/12 00:20:32 simple.go:241: clienthost: ::1
2025/09/12 00:20:32 simple.go:242: clientport: 7957
2025/09/12 00:20:32 simple.go:271: simple Handle header:
2025/09/12 00:20:32 simple.go:274: simple Handle Forwarded : for=::1;by=[::1]:8080;host=www.so.com:80;proto=http
2025/09/12 00:20:32 simple.go:276: HEAD / HTTP/1.1
2025/09/12 00:20:32 simple.go:281: Forwarded: for=::1;by=[::1]:8080;host=www.so.com:80;proto=http
2025/09/12 00:20:32 simple.go:287: Host: www.so.com
User-Agent: curl/8.12.1
Accept: */*
Proxy-Connection: Keep-Alive
2025/09/12 00:20:32 http.go:90: method: HEAD
2025/09/12 00:20:32 http.go:91: url: /
2025/09/12 00:20:32 http.go:92: host: www.so.com
2025/09/12 00:20:32 http.go:93: proxyHandler header:
2025/09/12 00:20:32 http.go:120: clienthost: 127.0.0.1
2025/09/12 00:20:32 http.go:121: clientport: 7958
2025/09/12 00:20:32 http.go:132: proxyHandler User-Agent : curl/8.12.1
2025/09/12 00:20:32 http.go:132: proxyHandler Accept : */*
2025/09/12 00:20:32 http.go:132: proxyHandler Proxy-Connection : Keep-Alive
2025/09/12 00:20:32 http.go:132: proxyHandler Forwarded : for=::1;by=[::1]:8080;host=www.so.com:80;proto=http,for=127.0.0.1;by=127.168.226.92:50056;host=www.so.com;proto=http
2025/09/12 00:20:32 http.go:135: forwardedHeader: for=::1;by=[::1]:8080;host=www.so.com:80;proto=http, for=127.0.0.1;by=127.168.226.92:50056;host=www.so.com;proto=http
2025/09/12 00:20:32 http.go:137: forwardedByList: [{[::1]:8080} {127.168.226.92:50056}]
2025/09/12 00:20:32 http.go:155: targetUrl: http://www.so.com/
2025/09/12 00:20:32 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.so.com
[GIN] 2025/09/12 - 00:20:32 | 302 |     25.1652ms |       127.0.0.1 | HEAD     "/"
2025/09/12 00:20:32 simple.go:57: remote addr: [::1]:7960
2025/09/12 00:20:32 simple.go:72: CONNECT www.so.com:443 HTTP/1.1
2025/09/12 00:20:32 simple.go:110: address:www.so.com:443
2025/09/12 00:20:32 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.so.com:443
2025/09/12 00:20:32 options.go:98: hostname www.so.com no ip found
2025/09/12 00:20:32 options.go:123: success connect to www.so.com:443 by tcp
2025/09/12 00:20:32 simple.go:227: è¿žæŽ¥æˆåŠŸï¼šwww.so.com:443
2025/09/12 00:20:32 simple.go:57: remote addr: [::1]:7965
2025/09/12 00:20:32 simple.go:72: CONNECT www.baidu.com:443 HTTP/1.1
2025/09/12 00:20:32 simple.go:110: address:www.baidu.com:443
2025/09/12 00:20:32 CheckShouldUseProxy.go:10: å¼€å§‹æ£€æŸ¥CheckShouldUseProxy www.baidu.com:443
2025/09/12 00:20:32 options.go:98: hostname www.baidu.com no ip found
2025/09/12 00:20:32 options.go:123: success connect to www.baidu.com:443 by tcp
2025/09/12 00:20:32 simple.go:227: è¿žæŽ¥æˆåŠŸï¼šwww.baidu.com:443
```

### æ‰€æœ‰å­è¿›ç¨‹æ—¥å¿—è¾“å‡º

```
### Curlæµ‹è¯•1è¾“å‡º ###
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD http://www.baidu.com/ HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.12.1
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
< Connection: keep-alive
< Content-Length: 277
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:20:20 GMT
< Etag: "575e1f60-115"
< Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
< Pragma: no-cache
< Server: bfe/1.0.8.18
< Tr_id: bfe_10574944984348671441
< 
  0   277    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
Connection: keep-alive
Content-Length: 277
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:20:20 GMT
Etag: "575e1f60-115"
Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
Pragma: no-cache
Server: bfe/1.0.8.18
Tr_id: bfe_10574944984348671441
### Curlæµ‹è¯•2è¾“å‡º ###
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD http://www.so.com/ HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.12.1
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
* Request completely sent off
< HTTP/1.1 302 Found
< Connection: keep-alive
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:20:20 GMT
< Location: https://www.so.com/
< Server: openresty
< Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/
* Ignoring the response-body
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
* Clear auth, redirects to port from 80 to 443
* Issue another request to this URL: 'https://www.so.com/'
* Hostname localhost was found in DNS cache
*   Trying [::1]:8080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.so.com:443
> CONNECT www.so.com:443 HTTP/1.1
> Host: www.so.com:443
> User-Agent: curl/8.12.1
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [305 bytes data]
*  CAfile: D:\è¿…é›·ä¸‹è½½\curl-8.12.1_4-win64-mingw\bin\curl-ca-bundle.crt
*  CApath: none
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [93 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [5077 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS change cipher, Change cipher spec (1):
{ [1 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / [blank] / UNDEF
* ALPN: server did not agree on a protocol. Uses default.
* Server certificate:
*  subject: CN=*.so.com
*  start date: Aug 28 00:00:00 2025 GMT
*  expire date: Sep 28 23:59:59 2026 GMT
*  subjectAltName: host "www.so.com" matched cert's "*.so.com"
*  issuer: C=CN; O=WoTrus CA Limited; CN=WoTrus DV Server CA  [Run by the Issuer]
*  SSL certificate verify ok.
*   Certificate level 0: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type ? (2048/112 Bits/secBits), signed using sha384WithRSAEncryption
*   Certificate level 2: Public key type ? (4096/128 Bits/secBits), signed using sha384WithRSAEncryption
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD / HTTP/1.1
> Host: www.so.com
> User-Agent: curl/8.12.1
> Accept: */*
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Server: openresty
< Date: Thu, 11 Sep 2025 16:20:20 GMT
< Content-Type: text/html; charset=UTF-8
< Connection: keep-alive
< Vary: Accept-Encoding
< Set-Cookie: _S=kvf7o8itsv0lfnjg6l181vr253; expires=Thu, 11-Sep-2025 16:30:20 GMT; Max-Age=600; path=/
< Expires: Thu, 19 Nov 1981 08:52:00 GMT
< Cache-Control: no-store, no-cache, must-revalidate
< Pragma: no-cache
< php-waf-rep: -
< Set-Cookie: QiHooGUID=012D839074930346EE73516444C5075C.1757607620796; Max-Age=63072000; Domain=so.com; Path=/
< 
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #1 to host localhost left intact
HTTP/1.1 302 Found
Connection: keep-alive
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:20:20 GMT
Location: https://www.so.com/
Server: openresty
Set-Cookie: QiHooGUID=; Max-Age=63072000; Domain=so.com; Path=/
HTTP/1.1 200 Connection established
HTTP/1.1 200 OK
Server: openresty
Date: Thu, 11 Sep 2025 16:20:20 GMT
Content-Type: text/html; charset=UTF-8
Connection: keep-alive
Vary: Accept-Encoding
Set-Cookie: _S=kvf7o8itsv0lfnjg6l181vr253; expires=Thu, 11-Sep-2025 16:30:20 GMT; Max-Age=600; path=/
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate
Pragma: no-cache
php-waf-rep: -
Set-Cookie: QiHooGUID=012D839074930346EE73516444C5075C.1757607620796; Max-Age=63072000; Domain=so.com; Path=/
### Curlæµ‹è¯•3è¾“å‡º ###
Note: Using embedded CA bundle, for proxies (233263 bytes)
* Host localhost:8080 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8080...
* CONNECT tunnel: HTTP/1.1 negotiated
* allocate connect buffer
* Establish HTTP proxy tunnel to www.baidu.com:443
> CONNECT www.baidu.com:443 HTTP/1.1
> Host: www.baidu.com:443
> User-Agent: curl/8.12.1
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 Connection established
< 
* CONNECT phase completed
* CONNECT tunnel established, response 200
* ALPN: curl offers h2,http/1.1
* TLSv1.3 (OUT), TLS handshake, Client hello (1):
} [308 bytes data]
*  CAfile: D:\è¿…é›·ä¸‹è½½\curl-8.12.1_4-win64-mingw\bin\curl-ca-bundle.crt
*  CApath: none
* TLSv1.3 (IN), TLS handshake, Server hello (2):
{ [102 bytes data]
* TLSv1.2 (IN), TLS handshake, Certificate (11):
{ [4771 bytes data]
* TLSv1.2 (IN), TLS handshake, Server key exchange (12):
{ [333 bytes data]
* TLSv1.2 (IN), TLS handshake, Server finished (14):
{ [4 bytes data]
* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):
} [70 bytes data]
* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1):
} [1 bytes data]
* TLSv1.2 (OUT), TLS handshake, Finished (20):
} [16 bytes data]
* TLSv1.2 (IN), TLS change cipher, Change cipher spec (1):
{ [1 bytes data]
* TLSv1.2 (IN), TLS handshake, Finished (20):
{ [16 bytes data]
* SSL connection using TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256 / [blank] / UNDEF
* ALPN: server accepted http/1.1
* Server certificate:
*  subject: C=CN; ST=beijing; L=beijing; O=Beijing Baidu Netcom Science Technology Co., Ltd; CN=baidu.com
*  start date: Jul  9 07:01:02 2025 GMT
*  expire date: Aug 10 07:01:01 2026 GMT
*  subjectAltName: host "www.baidu.com" matched cert's "*.baidu.com"
*  issuer: C=BE; O=GlobalSign nv-sa; CN=GlobalSign RSA OV SSL CA 2018
*  SSL certificate verify ok.
*   Certificate level 0: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 1: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
*   Certificate level 2: Public key type ? (2048/112 Bits/secBits), signed using sha256WithRSAEncryption
* Connected to localhost (::1) port 8080
* using HTTP/1.x
> HEAD / HTTP/1.1
> Host: www.baidu.com
> User-Agent: curl/8.12.1
> Accept: */*
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Accept-Ranges: bytes
< Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
< Connection: keep-alive
< Content-Length: 277
< Content-Type: text/html
< Date: Thu, 11 Sep 2025 16:20:20 GMT
< Etag: "575e1f60-115"
< Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
< Pragma: no-cache
< Server: bfe/1.0.8.18
< Tr_id: bfe_8261790080290078198
< 
  0   277    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
* Connection #0 to host localhost left intact
HTTP/1.1 200 Connection established
HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform
Connection: keep-alive
Content-Length: 277
Content-Type: text/html
Date: Thu, 11 Sep 2025 16:20:20 GMT
Etag: "575e1f60-115"
Last-Modified: Mon, 13 Jun 2016 02:50:08 GMT
Pragma: no-cache
Server: bfe/1.0.8.18
Tr_id: bfe_8261790080290078198
```

âœ… ç«¯å£8080å·²æˆåŠŸé‡Šæ”¾
